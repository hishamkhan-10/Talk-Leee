/*! For license information please see components-ui-dashboard-charts-stories.74a8a467.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[341],{"./node_modules/react-dom/cjs/react-dom.production.js"(__unused_webpack_module,exports,__webpack_require__){var React=__webpack_require__("./node_modules/react/index.js");function formatProdErrorMessage(code){var url="https://react.dev/errors/"+code;if(1<arguments.length){url+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)url+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+code+"; visit "+url+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function noop(){}var Internals={d:{f:noop,r:function(){throw Error(formatProdErrorMessage(522))},D:noop,C:noop,L:noop,m:noop,X:noop,S:noop,M:noop},p:0,findDOMNode:null},REACT_PORTAL_TYPE=Symbol.for("react.portal");var ReactSharedInternals=React.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function getCrossOriginStringAs(as,input){return"font"===as?"":"string"==typeof input?"use-credentials"===input?input:"":void 0}exports.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Internals,exports.createPortal=function(children,container){var key=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!container||1!==container.nodeType&&9!==container.nodeType&&11!==container.nodeType)throw Error(formatProdErrorMessage(299));return function createPortal$1(children,containerInfo,implementation){var key=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:REACT_PORTAL_TYPE,key:null==key?null:""+key,children,containerInfo,implementation}}(children,container,null,key)},exports.flushSync=function(fn){var previousTransition=ReactSharedInternals.T,previousUpdatePriority=Internals.p;try{if(ReactSharedInternals.T=null,Internals.p=2,fn)return fn()}finally{ReactSharedInternals.T=previousTransition,Internals.p=previousUpdatePriority,Internals.d.f()}},exports.preconnect=function(href,options){"string"==typeof href&&(options?options="string"==typeof(options=options.crossOrigin)?"use-credentials"===options?options:"":void 0:options=null,Internals.d.C(href,options))},exports.prefetchDNS=function(href){"string"==typeof href&&Internals.d.D(href)},exports.preinit=function(href,options){if("string"==typeof href&&options&&"string"==typeof options.as){var as=options.as,crossOrigin=getCrossOriginStringAs(as,options.crossOrigin),integrity="string"==typeof options.integrity?options.integrity:void 0,fetchPriority="string"==typeof options.fetchPriority?options.fetchPriority:void 0;"style"===as?Internals.d.S(href,"string"==typeof options.precedence?options.precedence:void 0,{crossOrigin,integrity,fetchPriority}):"script"===as&&Internals.d.X(href,{crossOrigin,integrity,fetchPriority,nonce:"string"==typeof options.nonce?options.nonce:void 0})}},exports.preinitModule=function(href,options){if("string"==typeof href)if("object"==typeof options&&null!==options){if(null==options.as||"script"===options.as){var crossOrigin=getCrossOriginStringAs(options.as,options.crossOrigin);Internals.d.M(href,{crossOrigin,integrity:"string"==typeof options.integrity?options.integrity:void 0,nonce:"string"==typeof options.nonce?options.nonce:void 0})}}else null==options&&Internals.d.M(href)},exports.preload=function(href,options){if("string"==typeof href&&"object"==typeof options&&null!==options&&"string"==typeof options.as){var as=options.as,crossOrigin=getCrossOriginStringAs(as,options.crossOrigin);Internals.d.L(href,as,{crossOrigin,integrity:"string"==typeof options.integrity?options.integrity:void 0,nonce:"string"==typeof options.nonce?options.nonce:void 0,type:"string"==typeof options.type?options.type:void 0,fetchPriority:"string"==typeof options.fetchPriority?options.fetchPriority:void 0,referrerPolicy:"string"==typeof options.referrerPolicy?options.referrerPolicy:void 0,imageSrcSet:"string"==typeof options.imageSrcSet?options.imageSrcSet:void 0,imageSizes:"string"==typeof options.imageSizes?options.imageSizes:void 0,media:"string"==typeof options.media?options.media:void 0})}},exports.preloadModule=function(href,options){if("string"==typeof href)if(options){var crossOrigin=getCrossOriginStringAs(options.as,options.crossOrigin);Internals.d.m(href,{as:"string"==typeof options.as&&"script"!==options.as?options.as:void 0,crossOrigin,integrity:"string"==typeof options.integrity?options.integrity:void 0})}else Internals.d.m(href)},exports.requestFormReset=function(form){Internals.d.r(form)},exports.unstable_batchedUpdates=function(fn,a){return fn(a)},exports.useFormState=function(action,initialState,permalink){return ReactSharedInternals.H.useFormState(action,initialState,permalink)},exports.useFormStatus=function(){return ReactSharedInternals.H.useHostTransitionStatus()},exports.version="19.2.1"},"./node_modules/react-dom/index.js"(module,__unused_webpack_exports,__webpack_require__){!function checkDCE(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(err){console.error(err)}}(),module.exports=__webpack_require__("./node_modules/react-dom/cjs/react-dom.production.js")},"./src/components/ui/dashboard-charts.stories.tsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Activity:()=>Activity,Alerts:()=>Alerts,Donut:()=>Donut,HeatmapDemo:()=>HeatmapDemo,LiveCalls:()=>LiveCalls,RealTimeBars:()=>RealTimeBars,RealTimeCallLine:()=>RealTimeCallLine,StackedArea:()=>StackedArea,TimeSeries:()=>TimeSeries,__namedExportsOrder:()=>__namedExportsOrder,default:()=>dashboard_charts_stories});var proxy=__webpack_require__("./node_modules/framer-motion/dist/es/render/components/motion/proxy.mjs"),react=__webpack_require__("./node_modules/react/index.js"),hover_tooltip=__webpack_require__("./src/components/ui/hover-tooltip.tsx");function clamp(value,min,max){return Math.min(max,Math.max(min,value))}function computeDonutSegmentTextLayout(input){const cx=Number(input.cx),cy=Number(input.cy),start=Number(input.startAngleRad),sweep=Math.max(0,Number(input.sweepAngleRad)),rInner=Math.max(0,Number(input.rInner)),rOuter=Math.max(rInner,Number(input.rOuter)),padding=Math.max(0,Number(input.paddingPx)),minFontPx=Math.max(8,Number(input.minFontPx??8)),maxFontPx=Math.max(minFontPx,Number(input.maxFontPx??14)),fullText=String(input.text??""),thickness=Math.max(0,rOuter-rInner),usableInner=rInner+padding,usableOuter=rOuter-padding,radius=clamp((usableInner+usableOuter)/2,usableInner,usableOuter),area=.5*sweep*Math.max(0,rOuter*rOuter-rInner*rInner),areaScale=Math.sqrt(Math.max(0,area)),fontPx=clamp(Math.floor(.22*areaScale),minFontPx,Math.min(maxFontPx,Math.floor(.9*thickness))),mid=start+sweep/2,arcLen=sweep*radius,availableWidth=Math.max(0,arcLen-2*padding),maxChars=Math.floor(availableWidth/function approxCharWidthPx(fontPx){return.62*fontPx}(fontPx)),tooSmall=sweep<10*Math.PI/180||thickness<minFontPx+padding||availableWidth<1.6*minFontPx||maxChars<=0,x=cx+radius*Math.cos(mid),y=cy+radius*Math.sin(mid);if(tooSmall)return{render:!0,truncated:!0,fontPx:minFontPx,x,y,lines:["…"],fullText};const maxCharsPerLine=Math.max(1,Math.min(maxChars,14)),{lines,truncated}=function splitToTwoLines(text,maxCharsPerLine){const trimmed=String(text??"").trim();if(trimmed.length<=maxCharsPerLine)return{lines:[trimmed],truncated:!1};if(maxCharsPerLine<=3)return{lines:["…"],truncated:!0};const first=trimmed.slice(0,maxCharsPerLine),remaining=trimmed.slice(maxCharsPerLine),secondMax=maxCharsPerLine;return remaining.length<=secondMax?{lines:[first,remaining],truncated:!1}:{lines:[first,remaining.slice(0,Math.max(1,secondMax-1)).trimEnd()+"…"],truncated:!0}}(fullText,maxCharsPerLine);return{render:!0,truncated,fontPx,x,y,lines,fullText}}var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function dashboard_charts_clamp(value,min,max){return Math.min(max,Math.max(min,value))}function toPath(points,smoothing=.18){if(0===points.length)return"";if(1===points.length)return`M ${points[0].x} ${points[0].y}`;const cps=(current,previous,next)=>{const dx=next.x-previous.x;return{x:current.x-dx*smoothing,y:current.y}},cpe=(current,previous,next)=>{const dx=next.x-previous.x;return{x:current.x+dx*smoothing,y:current.y}};let d=`M ${points[0].x} ${points[0].y}`;for(let i=0;i<points.length-1;i++){const p0=points[i-1]??points[i],p1=points[i],p2=points[i+1],p3=points[i+2]??p2,start=cpe(p1,p0,p2),end=cps(p2,p1,p3);d+=` C ${start.x} ${start.y}, ${end.x} ${end.y}, ${p2.x} ${p2.y}`}return d}function TimeSeriesLineChart({points,height=160,stroke="#111827",fill="rgba(17, 24, 39, 0.10)"}){const tooltip=(0,hover_tooltip.f)(),values=points.map(p=>p.value),min=Math.min(...values,0),range=Math.max(...values,1)-min||1,chartPoints=points.map((p,i)=>({x:10+580*i/Math.max(1,points.length-1),y:12+(1-(p.value-min)/range)*(height-24)})),d=toPath(chartPoints),areaD=chartPoints.length>0?`${d} L ${chartPoints[chartPoints.length-1].x} ${height-12} L ${chartPoints[0].x} ${height-12} Z`:"";return(0,jsx_runtime.jsxs)("div",{className:"relative",children:[(0,jsx_runtime.jsx)(hover_tooltip.s,{state:tooltip.state}),(0,jsx_runtime.jsxs)("svg",{viewBox:`0 0 600 ${height}`,className:"w-full h-40",children:[(0,jsx_runtime.jsx)("path",{d:areaD,fill}),(0,jsx_runtime.jsx)("path",{d,fill:"none",stroke,strokeWidth:2.5,strokeLinejoin:"round",strokeLinecap:"round"}),chartPoints.map((pt,i)=>{const label=points[i]?.label??"",value=points[i]?.value??0,content=(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("span",{className:"text-gray-700",children:label}),(0,jsx_runtime.jsx)("span",{className:"font-black tabular-nums",children:value.toLocaleString()})]});return(0,jsx_runtime.jsx)(proxy.P.circle,{cx:pt.x,cy:pt.y,r:4.25,fill:stroke,stroke:"rgba(255,255,255,0.85)",strokeWidth:1.5,tabIndex:0,role:"img","aria-label":`${label}: ${value}`,className:"cursor-default",whileHover:{scale:1.15,filter:"drop-shadow(0px 6px 10px rgba(0,0,0,0.16))"},transition:{duration:.3,ease:"easeInOut"},onMouseEnter:e=>tooltip.show(e.clientX,e.clientY,content),onMouseMove:e=>tooltip.show(e.clientX,e.clientY,content),onMouseLeave:()=>tooltip.hide(),onPointerDown:e=>{"touch"===e.pointerType&&tooltip.show(e.clientX,e.clientY,content,{pinned:!0,autoHideMs:2500})},onFocus:e=>{const rect=e.currentTarget.getBoundingClientRect();tooltip.show(rect.left+rect.width/2,rect.top+rect.height/2,content)},onBlur:()=>tooltip.hide()},`${label}-${i}`)})]})]})}function RealTimeBarChart({points,maxValue,height=160,aColor="from-emerald-600 to-emerald-400",bColor="from-red-500 to-red-400"}){const tooltip=(0,hover_tooltip.f)(),last=points[points.length-1],seedA=last?.a??0,seedB=last?.b??0,rafRef=(0,react.useRef)(null),pendingShowRef=(0,react.useRef)(null),toRange=(seed,min,max)=>{const span=max-min;return min+Math.abs(Math.trunc(seed))%(span+1)},answeredValue=toRange(13*seedA+7*points.length+maxValue,250,300),failedValue=toRange(17*seedB+5*points.length+maxValue,80,100),answeredTooltipContent=(0,react.useMemo)(()=>(0,jsx_runtime.jsxs)("div",{className:"space-y-1",children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-black text-gray-900",children:"Answered Calls"}),(0,jsx_runtime.jsx)("div",{className:"text-sm font-black tabular-nums",children:answeredValue.toLocaleString()})]}),[answeredValue]),failedTooltipContent=(0,react.useMemo)(()=>(0,jsx_runtime.jsxs)("div",{className:"space-y-1",children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-black text-gray-900",children:"Failed Calls"}),(0,jsx_runtime.jsx)("div",{className:"text-sm font-black tabular-nums",children:failedValue.toLocaleString()})]}),[failedValue]),scheduleShow=(x,y,content,options)=>{pendingShowRef.current={x,y,content,options},null===rafRef.current&&(rafRef.current=window.requestAnimationFrame(()=>{rafRef.current=null;const pending=pendingShowRef.current;pending&&tooltip.show(pending.x,pending.y,pending.content,pending.options)}))},chart=(0,react.useMemo)(()=>{const roundToUnit=v=>8*Math.round(v/8),toHalfPixel=v=>Math.round(2*v)/2,h=height;let plotH=roundToUnit(.618*h),bottom=h-32-plotH;bottom<32&&(bottom=32,plotH=h-32-bottom,plotH=roundToUnit(plotH),bottom=h-32-plotH);const maxVal=Math.max(1,answeredValue,failedValue),niceMax=50*Math.ceil(maxVal/50),ticks=[];for(let t=0;t<=niceMax;t+=50)ticks.push(t);const barW=roundToUnit(dashboard_charts_clamp(130,72,112)),gap=roundToUnit(Math.max(48,(520-2*barW)/3)),baseY=32+plotH,hFor=v=>toHalfPixel(v/niceMax*plotH);return{w:600,h,left:64,right:16,top:32,bottom,plotW:520,plotH,baseY,niceMax,ticks,barW,x1:64+gap,x2:64+2*gap+barW,yFor:v=>toHalfPixel(baseY-hFor(v)),hFor,unit:8,roundToUnit}},[answeredValue,failedValue,height]),[active,setActive]=(0,react.useState)(""),barTransition=(0,react.useMemo)(()=>({duration:.55,ease:[.22,1,.36,1]}),[]);return(0,jsx_runtime.jsxs)("div",{className:"relative",children:[(0,jsx_runtime.jsx)(hover_tooltip.s,{state:tooltip.state}),(0,jsx_runtime.jsxs)("svg",{viewBox:`0 0 ${chart.w} ${chart.h}`,className:"w-full",style:{height},children:[(0,jsx_runtime.jsx)("text",{x:chart.w/2,y:2*chart.unit,textAnchor:"middle",style:{fontWeight:800,fontSize:14,fill:"#111827"},children:"Real-Time Call Statistics"}),(0,jsx_runtime.jsx)("text",{x:2*chart.unit,y:chart.top+chart.plotH/2,textAnchor:"middle",transform:`rotate(-90 ${2*chart.unit} ${chart.top+chart.plotH/2})`,style:{fontWeight:600,fontSize:12,fill:"#4B5563"},children:"Number of Calls"}),chart.ticks.map(t=>{const y=chart.yFor(t);return(0,jsx_runtime.jsxs)("g",{children:[(0,jsx_runtime.jsx)("line",{x1:chart.left,y1:y,x2:chart.w-chart.right,y2:y,stroke:"rgba(17,24,39,0.08)",strokeWidth:1}),(0,jsx_runtime.jsx)("text",{x:chart.left-10,y:y+4,textAnchor:"end",style:{fontWeight:600,fontSize:12,fill:"#6B7280"},children:t})]},t)}),(0,jsx_runtime.jsx)("line",{x1:chart.left,y1:chart.top,x2:chart.left,y2:chart.top+chart.plotH,stroke:"rgba(17,24,39,0.22)",strokeWidth:1.5}),(0,jsx_runtime.jsx)("line",{x1:chart.left,y1:chart.top+chart.plotH,x2:chart.w-chart.right,y2:chart.top+chart.plotH,stroke:"rgba(17,24,39,0.22)",strokeWidth:1.5}),(0,jsx_runtime.jsx)(proxy.P.rect,{x:chart.x1,y:chart.yFor(answeredValue),width:chart.barW,height:chart.hFor(answeredValue),rx:10,fill:"#008080",initial:{y:chart.baseY,height:0,filter:"none"},animate:{y:chart.yFor(answeredValue),height:chart.hFor(answeredValue),filter:"answered"===active?"drop-shadow(0px 10px 18px rgba(0,0,0,0.16))":"none"},transition:barTransition,tabIndex:0,role:"img","aria-label":`Answered Calls: ${answeredValue}`,onMouseEnter:e=>{setActive("answered"),scheduleShow(e.clientX,e.clientY,answeredTooltipContent)},onMouseMove:e=>scheduleShow(e.clientX,e.clientY,answeredTooltipContent),onMouseLeave:()=>{setActive(""),tooltip.hide()},onPointerDown:e=>{"touch"===e.pointerType&&(setActive("answered"),tooltip.show(e.clientX,e.clientY,answeredTooltipContent,{pinned:!0,autoHideMs:3e3}))},onFocus:e=>{setActive("answered");const rect=e.currentTarget.getBoundingClientRect();tooltip.show(rect.left+rect.width/2,rect.top,answeredTooltipContent)},onBlur:()=>{setActive(""),tooltip.hide()}}),(0,jsx_runtime.jsx)(proxy.P.rect,{x:chart.x2,y:chart.yFor(failedValue),width:chart.barW,height:chart.hFor(failedValue),rx:10,fill:"#FF0000",initial:{y:chart.baseY,height:0,filter:"none"},animate:{y:chart.yFor(failedValue),height:chart.hFor(failedValue),filter:"failed"===active?"drop-shadow(0px 10px 18px rgba(0,0,0,0.16))":"none"},transition:barTransition,tabIndex:0,role:"img","aria-label":`Failed Calls: ${failedValue}`,onMouseEnter:e=>{setActive("failed"),scheduleShow(e.clientX,e.clientY,failedTooltipContent)},onMouseMove:e=>scheduleShow(e.clientX,e.clientY,failedTooltipContent),onMouseLeave:()=>{setActive(""),tooltip.hide()},onPointerDown:e=>{"touch"===e.pointerType&&(setActive("failed"),tooltip.show(e.clientX,e.clientY,failedTooltipContent,{pinned:!0,autoHideMs:3e3}))},onFocus:e=>{setActive("failed");const rect=e.currentTarget.getBoundingClientRect();tooltip.show(rect.left+rect.width/2,rect.top,failedTooltipContent)},onBlur:()=>{setActive(""),tooltip.hide()}}),(0,jsx_runtime.jsx)(proxy.P.text,{x:chart.x1+chart.barW/2,y:Math.max(chart.top+2*chart.unit,chart.roundToUnit(chart.yFor(answeredValue)-chart.unit)),textAnchor:"middle",style:{fontWeight:900,fontSize:16,fill:"#111827"},initial:{y:chart.baseY-chart.unit,opacity:0},animate:{y:Math.max(chart.top+2*chart.unit,chart.roundToUnit(chart.yFor(answeredValue)-chart.unit)),opacity:1},transition:barTransition,children:answeredValue}),(0,jsx_runtime.jsx)(proxy.P.text,{x:chart.x2+chart.barW/2,y:Math.max(chart.top+2*chart.unit,chart.roundToUnit(chart.yFor(failedValue)-chart.unit)),textAnchor:"middle",style:{fontWeight:900,fontSize:16,fill:"#111827"},initial:{y:chart.baseY-chart.unit,opacity:0},animate:{y:Math.max(chart.top+2*chart.unit,chart.roundToUnit(chart.yFor(failedValue)-chart.unit)),opacity:1},transition:barTransition,children:failedValue}),(0,jsx_runtime.jsx)("text",{x:chart.x1+chart.barW/2,y:chart.top+chart.plotH+2*chart.unit,textAnchor:"middle",style:{fontWeight:800,fontSize:12,fill:"#111827"},children:"Answered Calls"}),(0,jsx_runtime.jsx)("text",{x:chart.x2+chart.barW/2,y:chart.top+chart.plotH+2*chart.unit,textAnchor:"middle",style:{fontWeight:800,fontSize:12,fill:"#111827"},children:"Failed Calls"}),(0,jsx_runtime.jsx)("text",{x:chart.left+chart.plotW/2,y:chart.h-chart.unit,textAnchor:"middle",style:{fontWeight:600,fontSize:12,fill:"#6B7280"},children:"Category"})]})]})}function RealTimeCallLineChart({points,height=300}){const tooltip=(0,hover_tooltip.f)(),svgRef=(0,react.useRef)(null),rafRef=(0,react.useRef)(null),pendingShowRef=(0,react.useRef)(null),scheduleShow=(x,y,content,options)=>{pendingShowRef.current={x,y,content,options},null===rafRef.current&&(rafRef.current=window.requestAnimationFrame(()=>{rafRef.current=null;const pending=pendingShowRef.current;pending&&tooltip.show(pending.x,pending.y,pending.content,pending.options)}))},chart=(0,react.useMemo)(()=>{const h=height,plotH=h-22-44,baseY=22+plotH,maxVal=Math.max(1,...points.map(p=>Math.max(0,p.a,p.b))),magnitude=Math.pow(10,Math.floor(Math.log10(maxVal))),target=maxVal/magnitude,stepBase=[1,2,2.5,5,10].find(s=>target<=s)??10,niceMax=Math.ceil(maxVal/(stepBase*magnitude))*stepBase*magnitude,ticks=[];for(let i=0;i<5;i++)ticks.push(Math.round(i*niceMax/4));return{w:760,h,left:56,right:20,top:22,bottom:44,plotW:684,plotH,baseY,niceMax,ticks,xFor:i=>points.length<=1?398:56+684*i/(points.length-1),yFor:v=>22+plotH-dashboard_charts_clamp(v,0,niceMax)/niceMax*plotH}},[height,points]),answeredPoints=(0,react.useMemo)(()=>points.map((p,i)=>({x:chart.xFor(i),y:chart.yFor(p.a)})),[chart,points]),failedPoints=(0,react.useMemo)(()=>points.map((p,i)=>({x:chart.xFor(i),y:chart.yFor(p.b)})),[chart,points]),answeredD=(0,react.useMemo)(()=>toPath(answeredPoints,.16),[answeredPoints]),failedD=(0,react.useMemo)(()=>toPath(failedPoints,.16),[failedPoints]),[activeIndex,setActiveIndex]=(0,react.useState)(null),showForIndex=(idx,clientX,clientY)=>{const p=points[idx];if(!p)return;const content=(0,jsx_runtime.jsxs)("div",{className:"space-y-1",children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-black text-gray-900",children:p.label}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between gap-6 text-sm",children:[(0,jsx_runtime.jsx)("span",{className:"text-emerald-700 font-bold",children:"Answered"}),(0,jsx_runtime.jsx)("span",{className:"tabular-nums font-black text-gray-900",children:p.a.toLocaleString()})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between gap-6 text-sm",children:[(0,jsx_runtime.jsx)("span",{className:"text-red-700 font-bold",children:"Failed"}),(0,jsx_runtime.jsx)("span",{className:"tabular-nums font-black text-gray-900",children:p.b.toLocaleString()})]})]});if("number"==typeof clientX&&"number"==typeof clientY)return void scheduleShow(clientX,clientY,content);const svg=svgRef.current;if(!svg)return;const rect=svg.getBoundingClientRect();scheduleShow(rect.left+rect.width/2,rect.top+.2*rect.height,content)},handlePointerMove=(clientX,clientY)=>{const svg=svgRef.current;if(!svg||0===points.length)return;const t=(dashboard_charts_clamp(clientX-svg.getBoundingClientRect().left,chart.left,chart.left+chart.plotW)-chart.left)/Math.max(1,chart.plotW),next=dashboard_charts_clamp(Math.round(t*Math.max(0,points.length-1)),0,Math.max(0,points.length-1));setActiveIndex(next),showForIndex(next,clientX,clientY)},activeX=null!==activeIndex?chart.xFor(activeIndex):null,activeAnsweredY=null!==activeIndex?chart.yFor(points[activeIndex]?.a??0):null,activeFailedY=null!==activeIndex?chart.yFor(points[activeIndex]?.b??0):null,xTicks=(0,react.useMemo)(()=>{if(0===points.length)return[];return Array.from(new Set([0,Math.floor((points.length-1)/3),Math.floor(2*(points.length-1)/3),points.length-1])).map(i=>({i,x:chart.xFor(i),label:points[i]?.label??""}))},[chart,points]);return(0,jsx_runtime.jsxs)("div",{className:"relative",children:[(0,jsx_runtime.jsx)(hover_tooltip.s,{state:tooltip.state}),(0,jsx_runtime.jsxs)("svg",{ref:svgRef,viewBox:`0 0 ${chart.w} ${chart.h}`,preserveAspectRatio:"xMidYMid meet",className:"w-full",style:{height},role:"img","aria-label":"Real-time answered and failed calls over time",tabIndex:0,onKeyDown:e=>{if(0===points.length)return;if("ArrowLeft"!==e.key&&"ArrowRight"!==e.key&&"Home"!==e.key&&"End"!==e.key)return;e.preventDefault();const current=activeIndex??points.length-1,next="ArrowLeft"===e.key?Math.max(0,current-1):"ArrowRight"===e.key?Math.min(points.length-1,current+1):"Home"===e.key?0:points.length-1;setActiveIndex(next),showForIndex(next)},onMouseMove:e=>handlePointerMove(e.clientX,e.clientY),onMouseLeave:()=>{setActiveIndex(null),tooltip.hide()},onPointerDown:e=>{if("touch"!==e.pointerType)return;const svg=svgRef.current;if(!svg||0===points.length)return;const rect=svg.getBoundingClientRect(),t=(dashboard_charts_clamp(e.clientX-rect.left,chart.left,chart.left+chart.plotW)-chart.left)/Math.max(1,chart.plotW),idx=dashboard_charts_clamp(Math.round(t*Math.max(0,points.length-1)),0,Math.max(0,points.length-1));setActiveIndex(idx);const p=points[idx];p&&tooltip.show(e.clientX,e.clientY,(0,jsx_runtime.jsxs)("div",{className:"space-y-1",children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-black text-gray-900",children:p.label}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between gap-6 text-sm",children:[(0,jsx_runtime.jsx)("span",{className:"text-emerald-700 font-bold",children:"Answered"}),(0,jsx_runtime.jsx)("span",{className:"tabular-nums font-black text-gray-900",children:p.a.toLocaleString()})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between gap-6 text-sm",children:[(0,jsx_runtime.jsx)("span",{className:"text-red-700 font-bold",children:"Failed"}),(0,jsx_runtime.jsx)("span",{className:"tabular-nums font-black text-gray-900",children:p.b.toLocaleString()})]})]}),{pinned:!0,autoHideMs:3e3})},onFocus:()=>{if(0===points.length)return;const idx=activeIndex??Math.max(0,points.length-1);setActiveIndex(idx),showForIndex(idx)},onBlur:()=>{setActiveIndex(null),tooltip.hide()},children:[(0,jsx_runtime.jsx)("rect",{x:chart.left,y:chart.top,width:chart.plotW,height:chart.plotH,fill:"rgba(17,24,39,0.02)",rx:14}),chart.ticks.map(t=>{const y=chart.yFor(t);return(0,jsx_runtime.jsxs)("g",{children:[(0,jsx_runtime.jsx)("line",{x1:chart.left,y1:y,x2:chart.left+chart.plotW,y2:y,stroke:"rgba(17,24,39,0.10)",strokeWidth:1,strokeDasharray:"4 6",vectorEffect:"non-scaling-stroke"}),(0,jsx_runtime.jsx)("text",{x:chart.left-12,y:y+4,textAnchor:"end",style:{fontWeight:700,fontSize:12,fill:"#6B7280"},children:t})]},t)}),(0,jsx_runtime.jsx)("line",{x1:chart.left,y1:chart.top,x2:chart.left,y2:chart.top+chart.plotH,stroke:"rgba(17,24,39,0.30)",strokeWidth:1.5,vectorEffect:"non-scaling-stroke"}),(0,jsx_runtime.jsx)("line",{x1:chart.left,y1:chart.baseY,x2:chart.left+chart.plotW,y2:chart.baseY,stroke:"rgba(17,24,39,0.30)",strokeWidth:1.5,vectorEffect:"non-scaling-stroke"}),(0,jsx_runtime.jsx)("text",{x:chart.left+chart.plotW/2,y:chart.h-10,textAnchor:"middle",style:{fontWeight:700,fontSize:12,fill:"#6B7280"},children:"Time"}),(0,jsx_runtime.jsx)("text",{x:16,y:chart.top+chart.plotH/2,textAnchor:"middle",transform:`rotate(-90 16 ${chart.top+chart.plotH/2})`,style:{fontWeight:700,fontSize:12,fill:"#6B7280"},children:"Calls"}),(0,jsx_runtime.jsxs)("g",{transform:`translate(${chart.left+10}, ${chart.top-8})`,children:[(0,jsx_runtime.jsxs)("g",{children:[(0,jsx_runtime.jsx)("rect",{x:0,y:0,width:10,height:10,rx:3,fill:"#059669"}),(0,jsx_runtime.jsx)("text",{x:16,y:9,style:{fontWeight:800,fontSize:12,fill:"#111827"},children:"Answered"})]}),(0,jsx_runtime.jsxs)("g",{transform:"translate(102, 0)",children:[(0,jsx_runtime.jsx)("rect",{x:0,y:0,width:10,height:10,rx:3,fill:"#DC2626"}),(0,jsx_runtime.jsx)("text",{x:16,y:9,style:{fontWeight:800,fontSize:12,fill:"#111827"},children:"Failed"})]})]}),(0,jsx_runtime.jsx)(proxy.P.path,{d:answeredD,fill:"none",stroke:"#059669",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",vectorEffect:"non-scaling-stroke",initial:!1,animate:{d:answeredD},transition:{duration:.35,ease:"easeInOut"}}),(0,jsx_runtime.jsx)(proxy.P.path,{d:failedD,fill:"none",stroke:"#DC2626",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",vectorEffect:"non-scaling-stroke",initial:!1,animate:{d:failedD},transition:{duration:.35,ease:"easeInOut"}}),null!==activeX?(0,jsx_runtime.jsxs)("g",{children:[(0,jsx_runtime.jsx)("line",{x1:activeX,y1:chart.top,x2:activeX,y2:chart.baseY,stroke:"rgba(17,24,39,0.18)",strokeWidth:1.5,vectorEffect:"non-scaling-stroke"}),null!==activeAnsweredY?(0,jsx_runtime.jsx)("circle",{cx:activeX,cy:activeAnsweredY,r:6,fill:"#059669",stroke:"rgba(255,255,255,0.95)",strokeWidth:2,vectorEffect:"non-scaling-stroke"}):null,null!==activeFailedY?(0,jsx_runtime.jsx)("circle",{cx:activeX,cy:activeFailedY,r:6,fill:"#DC2626",stroke:"rgba(255,255,255,0.95)",strokeWidth:2,vectorEffect:"non-scaling-stroke"}):null]}):null,xTicks.map(t=>(0,jsx_runtime.jsx)("text",{x:t.x,y:chart.baseY+24,textAnchor:"middle",style:{fontWeight:700,fontSize:12,fill:"#4B5563"},children:t.label},t.i)),(0,jsx_runtime.jsx)("rect",{x:chart.left,y:chart.top,width:chart.plotW,height:chart.plotH,fill:"transparent",onMouseMove:e=>handlePointerMove(e.clientX,e.clientY),onMouseLeave:()=>{setActiveIndex(null),tooltip.hide()}})]})]})}function DonutChart({value,total,size=132,strokeWidth=14,valueColor="#10B981",failedColor="#EF4444",trackColor="rgba(17, 24, 39, 0.10)"}){const tooltip=(0,hover_tooltip.f)(),containerRef=(0,react.useRef)(null),[renderSize,setRenderSize]=(0,react.useState)(size);(0,react.useLayoutEffect)(()=>{const el=containerRef.current;if(!el)return;const ro=new ResizeObserver(entries=>{const entry=entries[0];if(!entry)return;const next=Math.max(64,Math.min(size,Math.floor(entry.contentRect.width)));setRenderSize(prev=>prev===next?prev:next)});return ro.observe(el),()=>ro.disconnect()},[size]);const r=(renderSize-strokeWidth)/2,c=2*Math.PI*r,answered=Math.max(0,value),failed=Math.max(0,total-answered),answeredPct=total>0?dashboard_charts_clamp(answered/total,0,1):0,failedPct=total>0?dashboard_charts_clamp(failed/total,0,1):0,answeredDash=c*answeredPct,failedDash=c*failedPct,cx=renderSize/2,cy=renderSize/2,rInner=Math.max(0,r-strokeWidth/2),rOuter=r+strokeWidth/2,baseAngle=-Math.PI/2,answeredText=(0,react.useMemo)(()=>`Answered ${answered.toLocaleString()}`,[answered]),failedText=(0,react.useMemo)(()=>`Failed ${failed.toLocaleString()}`,[failed]),answeredLayout=(0,react.useMemo)(()=>computeDonutSegmentTextLayout({cx,cy,startAngleRad:baseAngle,sweepAngleRad:2*answeredPct*Math.PI,rInner,rOuter,paddingPx:6,text:answeredText,minFontPx:8,maxFontPx:10}),[answeredPct,answeredText,baseAngle,cx,cy,rInner,rOuter]),failedLayout=(0,react.useMemo)(()=>computeDonutSegmentTextLayout({cx,cy,startAngleRad:baseAngle+2*answeredPct*Math.PI,sweepAngleRad:2*failedPct*Math.PI,rInner,rOuter,paddingPx:6,text:failedText,minFontPx:8,maxFontPx:10}),[answeredPct,failedPct,failedText,baseAngle,cx,cy,rInner,rOuter]),answeredLabelVisible=answeredLayout.render&&!(1===answeredLayout.lines.length&&"…"===answeredLayout.lines[0]),failedLabelVisible=failedLayout.render&&!(1===failedLayout.lines.length&&"…"===failedLayout.lines[0]),summaryContent=(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-black text-gray-900",children:"Calls breakdown"}),(0,jsx_runtime.jsxs)("div",{className:"space-y-1.5",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between gap-6",children:[(0,jsx_runtime.jsx)("span",{className:"text-emerald-700 font-bold",children:"Answered"}),(0,jsx_runtime.jsxs)("span",{className:"tabular-nums font-black text-gray-900",children:[answered.toLocaleString()," ",(0,jsx_runtime.jsxs)("span",{className:"text-gray-600 font-semibold",children:["(",Math.round(100*answeredPct),"%)"]})]})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between gap-6",children:[(0,jsx_runtime.jsx)("span",{className:"text-red-700 font-bold",children:"Failed"}),(0,jsx_runtime.jsxs)("span",{className:"tabular-nums font-black text-gray-900",children:[failed.toLocaleString()," ",(0,jsx_runtime.jsxs)("span",{className:"text-gray-600 font-semibold",children:["(",Math.round(100*failedPct),"%)"]})]})]})]}),(0,jsx_runtime.jsxs)("div",{className:"text-xs font-semibold text-gray-600",children:["Total: ",total.toLocaleString()]})]}),answeredContent=(0,jsx_runtime.jsxs)("div",{className:"space-y-1",children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-black text-gray-900",children:"Answered"}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between gap-6",children:[(0,jsx_runtime.jsx)("span",{className:"tabular-nums font-black",children:answered.toLocaleString()}),(0,jsx_runtime.jsxs)("span",{className:"text-gray-600 font-semibold",children:[Math.round(100*answeredPct),"%"]})]})]}),failedContent=(0,jsx_runtime.jsxs)("div",{className:"space-y-1",children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-black text-gray-900",children:"Failed"}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between gap-6",children:[(0,jsx_runtime.jsx)("span",{className:"tabular-nums font-black",children:failed.toLocaleString()}),(0,jsx_runtime.jsxs)("span",{className:"text-gray-600 font-semibold",children:[Math.round(100*failedPct),"%"]})]})]});return(0,jsx_runtime.jsxs)(proxy.P.div,{ref:containerRef,className:"relative flex items-center justify-center outline-none",tabIndex:0,role:"img","aria-label":`Answered ${answered} (${Math.round(100*answeredPct)}%), Failed ${failed} (${Math.round(100*failedPct)}%), Total ${total}`,whileHover:{scale:1.01,filter:"drop-shadow(0px 10px 18px rgba(0,0,0,0.14))"},transition:{duration:.25,ease:"easeInOut"},onMouseEnter:e=>tooltip.show(e.clientX,e.clientY,summaryContent),onMouseMove:e=>tooltip.show(e.clientX,e.clientY,summaryContent),onMouseLeave:()=>tooltip.hide(),onPointerDown:e=>{"touch"===e.pointerType&&tooltip.show(e.clientX,e.clientY,summaryContent,{pinned:!0,autoHideMs:3e3})},onFocus:e=>{const rect=e.currentTarget.getBoundingClientRect();tooltip.show(rect.left+rect.width/2,rect.top+rect.height/2,summaryContent)},onBlur:()=>tooltip.hide(),children:[(0,jsx_runtime.jsx)(hover_tooltip.s,{state:tooltip.state}),(0,jsx_runtime.jsxs)("svg",{width:renderSize,height:renderSize,viewBox:`0 0 ${renderSize} ${renderSize}`,className:"shrink-0 overflow-visible",children:[(0,jsx_runtime.jsx)("circle",{cx,cy,r,stroke:trackColor,strokeWidth,fill:"none"}),(0,jsx_runtime.jsx)(proxy.P.circle,{cx,cy,r,stroke:failedColor,strokeWidth,fill:"none",strokeLinecap:"round",strokeDasharray:`${failedDash} ${Math.max(0,c-failedDash)}`,strokeDashoffset:.25*c-answeredDash,initial:!1,animate:{strokeDasharray:`${failedDash} ${Math.max(0,c-failedDash)}`},transition:{type:"spring",stiffness:120,damping:20},whileHover:{strokeWidth:1.2*strokeWidth,filter:"drop-shadow(0px 8px 14px rgba(0,0,0,0.16))",transition:{duration:.3,ease:"easeInOut"}},onMouseEnter:e=>tooltip.show(e.clientX,e.clientY,failedContent),onMouseMove:e=>tooltip.show(e.clientX,e.clientY,failedContent),onMouseLeave:()=>tooltip.hide(),onPointerDown:e=>{"touch"===e.pointerType&&tooltip.show(e.clientX,e.clientY,failedContent,{pinned:!0,autoHideMs:2500})}}),(0,jsx_runtime.jsx)(proxy.P.circle,{cx,cy,r,stroke:valueColor,strokeWidth,fill:"none",strokeLinecap:"round",strokeDasharray:`${answeredDash} ${Math.max(0,c-answeredDash)}`,strokeDashoffset:.25*c,initial:!1,animate:{strokeDasharray:`${answeredDash} ${Math.max(0,c-answeredDash)}`},transition:{type:"spring",stiffness:120,damping:20},whileHover:{strokeWidth:1.2*strokeWidth,filter:"drop-shadow(0px 8px 14px rgba(0,0,0,0.16))",transition:{duration:.3,ease:"easeInOut"}},onMouseEnter:e=>tooltip.show(e.clientX,e.clientY,answeredContent),onMouseMove:e=>tooltip.show(e.clientX,e.clientY,answeredContent),onMouseLeave:()=>tooltip.hide(),onPointerDown:e=>{"touch"===e.pointerType&&tooltip.show(e.clientX,e.clientY,answeredContent,{pinned:!0,autoHideMs:2500})}}),answeredLabelVisible?(0,jsx_runtime.jsxs)(proxy.P.text,{x:answeredLayout.x,y:answeredLayout.y,textAnchor:"middle",dominantBaseline:"middle",style:{fontWeight:800,fontSize:answeredLayout.fontPx,fill:"#111827"},initial:{opacity:0,y:answeredLayout.y+2},animate:{opacity:1,y:answeredLayout.y},transition:{duration:.55,ease:[.22,1,.36,1]},children:[answeredLayout.lines.map((line,i)=>(0,jsx_runtime.jsx)("tspan",{x:answeredLayout.x,dy:0===i?0:1.05*answeredLayout.fontPx,children:line},i)),answeredLayout.truncated?(0,jsx_runtime.jsx)("title",{children:answeredLayout.fullText}):null]}):null,failedLabelVisible?(0,jsx_runtime.jsxs)(proxy.P.text,{x:failedLayout.x,y:failedLayout.y,textAnchor:"middle",dominantBaseline:"middle",style:{fontWeight:800,fontSize:failedLayout.fontPx,fill:"#111827"},initial:{opacity:0,y:failedLayout.y+2},animate:{opacity:1,y:failedLayout.y},transition:{duration:.55,ease:[.22,1,.36,1]},children:[failedLayout.lines.map((line,i)=>(0,jsx_runtime.jsx)("tspan",{x:failedLayout.x,dy:0===i?0:1.05*failedLayout.fontPx,children:line},i)),failedLayout.truncated?(0,jsx_runtime.jsx)("title",{children:failedLayout.fullText}):null]}):null]})]})}function Heatmap({rows,cols,cellValues,maxValue}){const tooltip=(0,hover_tooltip.f)();return(0,jsx_runtime.jsxs)("div",{className:"relative overflow-x-auto",children:[(0,jsx_runtime.jsx)(hover_tooltip.s,{state:tooltip.state}),(0,jsx_runtime.jsx)("div",{className:"min-w-[520px]",children:(0,jsx_runtime.jsxs)("div",{className:"grid",style:{gridTemplateColumns:`120px repeat(${cols.length}, minmax(0, 1fr))`},children:[(0,jsx_runtime.jsx)("div",{}),cols.map(c=>(0,jsx_runtime.jsx)("div",{className:"text-[11px] font-semibold text-gray-600 text-center pb-2",children:c},c)),rows.map((r,ri)=>(0,jsx_runtime.jsxs)("div",{className:"contents",children:[(0,jsx_runtime.jsx)("div",{className:"text-xs font-semibold text-gray-700 pr-3 flex items-center",children:r}),cols.map((c,ci)=>{const v=cellValues[ri]?.[ci]??0,bg=`rgba(16, 185, 129, ${.06+.5*(maxValue>0?dashboard_charts_clamp(v/maxValue,0,1):0)})`;return(0,jsx_runtime.jsx)("div",{className:"p-1",children:(0,jsx_runtime.jsx)("div",{className:"h-6 rounded-md border border-black/5 transition-all duration-300 ease-in-out hover:border-gray-900/20 hover:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-900/20",style:{background:bg},tabIndex:0,role:"img","aria-label":`${r} ${c}: ${v}`,onMouseEnter:e=>tooltip.show(e.clientX,e.clientY,(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("span",{className:"text-gray-700",children:r}),(0,jsx_runtime.jsx)("span",{className:"text-gray-600",children:c}),(0,jsx_runtime.jsx)("span",{className:"font-black tabular-nums",children:v.toLocaleString()})]})),onMouseMove:e=>tooltip.show(e.clientX,e.clientY,(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("span",{className:"text-gray-700",children:r}),(0,jsx_runtime.jsx)("span",{className:"text-gray-600",children:c}),(0,jsx_runtime.jsx)("span",{className:"font-black tabular-nums",children:v.toLocaleString()})]})),onMouseLeave:()=>tooltip.hide(),onPointerDown:e=>{"touch"===e.pointerType&&tooltip.show(e.clientX,e.clientY,(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("span",{className:"text-gray-700",children:r}),(0,jsx_runtime.jsx)("span",{className:"text-gray-600",children:c}),(0,jsx_runtime.jsx)("span",{className:"font-black tabular-nums",children:v.toLocaleString()})]}),{pinned:!0,autoHideMs:2500})},onFocus:e=>{const rect=e.currentTarget.getBoundingClientRect();tooltip.show(rect.left+rect.width/2,rect.top,(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("span",{className:"text-gray-700",children:r}),(0,jsx_runtime.jsx)("span",{className:"text-gray-600",children:c}),(0,jsx_runtime.jsx)("span",{className:"font-black tabular-nums",children:v.toLocaleString()})]}))},onBlur:()=>tooltip.hide()})},`${r}-${c}`)})]},r))]})})]})}function StackedAreaChart({points,height=160,aColor="rgba(16, 185, 129, 0.22)",bColor="rgba(239, 68, 68, 0.18)",aStroke="rgba(16, 185, 129, 0.95)",bStroke="rgba(239, 68, 68, 0.85)"}){const tooltip=(0,hover_tooltip.f)(),[activeIndex,setActiveIndex]=(0,react.useState)(null),data=(0,react.useMemo)(()=>{const totals=points.map(p=>p.a+p.b),max=Math.max(...totals,1),xForIndex=i=>10+580*i/Math.max(1,points.length-1),yForValue=v=>16+(1-v/max)*(height-32),topLine=points.map((p,i)=>({x:xForIndex(i),y:yForValue(p.a+p.b)})),midLine=points.map((p,i)=>({x:xForIndex(i),y:yForValue(p.a)})),topD=toPath(topLine,.16),midD=toPath(midLine,.16),baselineY=height-16;return{topLine,midLine,topD,midD,topArea:topLine.length>0?`${topD} L ${topLine[topLine.length-1].x} ${baselineY} L ${topLine[0].x} ${baselineY} Z`:"",midArea:midLine.length>0?`${midD} L ${midLine[midLine.length-1].x} ${baselineY} L ${midLine[0].x} ${baselineY} Z`:"",baselineY}},[aStroke,bStroke,height,10,16,points]),indexForClientX=(clientX,rect)=>{const t=((clientX-rect.left)/Math.max(1,rect.width)*600-10)/Math.max(1,580);return dashboard_charts_clamp(Math.round(t*Math.max(1,points.length-1)),0,Math.max(0,points.length-1))},showForIndex=(i,clientX,clientY,pin)=>{const p=points[i];if(!p)return;const total=p.a+p.b,aPct=total>0?Math.round(p.a/total*100):0,bPct=total>0?Math.round(p.b/total*100):0;tooltip.show(clientX,clientY,(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-black text-gray-900",children:p.label}),(0,jsx_runtime.jsxs)("div",{className:"space-y-1.5",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between gap-6",children:[(0,jsx_runtime.jsx)("span",{className:"text-emerald-700 font-bold",children:"Answered"}),(0,jsx_runtime.jsxs)("span",{className:"tabular-nums font-black text-gray-900",children:[p.a.toLocaleString()," ",(0,jsx_runtime.jsxs)("span",{className:"text-gray-600 font-semibold",children:["(",aPct,"%)"]})]})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between gap-6",children:[(0,jsx_runtime.jsx)("span",{className:"text-red-700 font-bold",children:"Failed"}),(0,jsx_runtime.jsxs)("span",{className:"tabular-nums font-black text-gray-900",children:[p.b.toLocaleString()," ",(0,jsx_runtime.jsxs)("span",{className:"text-gray-600 font-semibold",children:["(",bPct,"%)"]})]})]})]}),(0,jsx_runtime.jsxs)("div",{className:"text-xs font-semibold text-gray-600",children:["Total: ",total.toLocaleString()]})]}),pin?{pinned:!0,autoHideMs:3e3}:void 0)},activeX=null!==activeIndex?data.midLine[activeIndex]?.x??null:null,activeMid=null!==activeIndex?data.midLine[activeIndex]??null:null,activeTop=null!==activeIndex?data.topLine[activeIndex]??null:null;return(0,jsx_runtime.jsxs)("div",{className:"relative",children:[(0,jsx_runtime.jsx)(hover_tooltip.s,{state:tooltip.state,className:"w-[260px] text-sm font-semibold"}),(0,jsx_runtime.jsxs)("svg",{viewBox:`0 0 600 ${height}`,className:"w-full h-40",onPointerMove:e=>{const rect=e.currentTarget.getBoundingClientRect(),idx=indexForClientX(e.clientX,rect);setActiveIndex(idx),showForIndex(idx,e.clientX,e.clientY)},onPointerLeave:()=>{setActiveIndex(null),tooltip.hide()},onPointerDown:e=>{if("touch"!==e.pointerType)return;const rect=e.currentTarget.getBoundingClientRect(),idx=indexForClientX(e.clientX,rect);setActiveIndex(idx),showForIndex(idx,e.clientX,e.clientY,!0)},role:"img","aria-label":"Stacked area chart of answered and failed calls",children:[(0,jsx_runtime.jsx)("path",{d:data.topArea,fill:bColor}),(0,jsx_runtime.jsx)("path",{d:data.midArea,fill:aColor}),(0,jsx_runtime.jsx)("path",{d:data.topD,fill:"none",stroke:bStroke,strokeWidth:2.25,strokeLinejoin:"round",strokeLinecap:"round"}),(0,jsx_runtime.jsx)("path",{d:data.midD,fill:"none",stroke:aStroke,strokeWidth:2.25,strokeLinejoin:"round",strokeLinecap:"round"}),null!==activeX?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(proxy.P.line,{x1:activeX,x2:activeX,y1:16,y2:height-16,stroke:"rgba(17, 24, 39, 0.18)",strokeWidth:2,initial:!1,animate:{opacity:1},transition:{duration:.3,ease:"easeInOut"}}),activeMid?(0,jsx_runtime.jsx)(proxy.P.circle,{cx:activeMid.x,cy:activeMid.y,r:5,fill:aStroke,stroke:"rgba(255,255,255,0.9)",strokeWidth:2,initial:!1,animate:{r:5.4},transition:{duration:.3,ease:"easeInOut"}}):null,activeTop?(0,jsx_runtime.jsx)(proxy.P.circle,{cx:activeTop.x,cy:activeTop.y,r:5,fill:bStroke,stroke:"rgba(255,255,255,0.9)",strokeWidth:2,initial:!1,animate:{r:5.4},transition:{duration:.3,ease:"easeInOut"}}):null]}):null]})]})}function ActivityFeed({items}){const tooltip=(0,hover_tooltip.f)(),[activeId,setActiveId]=(0,react.useState)("");return(0,jsx_runtime.jsxs)("div",{className:"relative space-y-2",children:[(0,jsx_runtime.jsx)(hover_tooltip.s,{state:tooltip.state,className:"w-[320px] text-sm font-semibold p-4"}),items.map(item=>(0,jsx_runtime.jsxs)("div",{className:"group relative rounded-xl border border-transparent px-2 py-2 transition-all duration-300 ease-in-out hover:border-gray-200 hover:bg-gray-50/80 hover:shadow-sm focus-within:border-gray-200 focus-within:bg-gray-50/80 focus-within:shadow-sm",onMouseEnter:e=>{setActiveId(item.id),tooltip.show(e.clientX,e.clientY,(0,jsx_runtime.jsxs)("div",{className:"space-y-1.5",children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-black text-gray-900",children:item.title}),(0,jsx_runtime.jsx)("div",{className:"text-xs text-gray-700",children:item.detail}),(0,jsx_runtime.jsxs)("div",{className:"text-[11px] font-semibold text-gray-600",children:["Time: ",item.timeLabel]})]}))},onMouseMove:e=>{tooltip.show(e.clientX,e.clientY,(0,jsx_runtime.jsxs)("div",{className:"space-y-1.5",children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-black text-gray-900",children:item.title}),(0,jsx_runtime.jsx)("div",{className:"text-xs text-gray-700",children:item.detail}),(0,jsx_runtime.jsxs)("div",{className:"text-[11px] font-semibold text-gray-600",children:["Time: ",item.timeLabel]})]}))},onMouseLeave:()=>{setActiveId(""),tooltip.hide()},onPointerDown:e=>{"touch"===e.pointerType&&(setActiveId(item.id),tooltip.show(e.clientX,e.clientY,(0,jsx_runtime.jsxs)("div",{className:"space-y-1.5",children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-black text-gray-900",children:item.title}),(0,jsx_runtime.jsx)("div",{className:"text-xs text-gray-700",children:item.detail}),(0,jsx_runtime.jsxs)("div",{className:"text-[11px] font-semibold text-gray-600",children:["Time: ",item.timeLabel]})]}),{pinned:!0,autoHideMs:3500}))},tabIndex:0,role:"group","aria-label":`${item.title}: ${item.detail}`,onKeyDown:e=>{if("Enter"!==e.key&&" "!==e.key)return;const rect=e.currentTarget.getBoundingClientRect();tooltip.show(rect.left+rect.width/2,rect.top+rect.height/2,(0,jsx_runtime.jsxs)("div",{className:"space-y-1.5",children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-black text-gray-900",children:item.title}),(0,jsx_runtime.jsx)("div",{className:"text-xs text-gray-700",children:item.detail}),(0,jsx_runtime.jsxs)("div",{className:"text-[11px] font-semibold text-gray-600",children:["Time: ",item.timeLabel]})]}),{pinned:!0,autoHideMs:4e3})},onFocus:e=>{const rect=e.currentTarget.getBoundingClientRect();setActiveId(item.id),tooltip.show(rect.left+rect.width/2,rect.top+rect.height/2,(0,jsx_runtime.jsxs)("div",{className:"space-y-1.5",children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-black text-gray-900",children:item.title}),(0,jsx_runtime.jsx)("div",{className:"text-xs text-gray-700",children:item.detail}),(0,jsx_runtime.jsxs)("div",{className:"text-[11px] font-semibold text-gray-600",children:["Time: ",item.timeLabel]})]}))},onBlur:()=>{setActiveId(""),tooltip.hide()},children:[(0,jsx_runtime.jsx)("div",{className:"absolute left-0 top-2 bottom-2 w-[2px] origin-left bg-gray-200 transition-transform duration-300 ease-in-out group-hover:scale-x-[1.2]"}),(0,jsx_runtime.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,jsx_runtime.jsxs)("div",{className:"min-w-0",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("div",{className:"good"===item.tone?"w-2.5 h-2.5 rounded-full bg-emerald-500 transition-transform duration-300 ease-in-out "+(activeId===item.id?"scale-110":""):"warn"===item.tone?"w-2.5 h-2.5 rounded-full bg-yellow-500 transition-transform duration-300 ease-in-out "+(activeId===item.id?"scale-110":""):"bad"===item.tone?"w-2.5 h-2.5 rounded-full bg-red-500 transition-transform duration-300 ease-in-out "+(activeId===item.id?"scale-110":""):"w-2.5 h-2.5 rounded-full bg-gray-400 transition-transform duration-300 ease-in-out "+(activeId===item.id?"scale-110":"")}),(0,jsx_runtime.jsx)("p",{className:"text-sm font-bold text-gray-900 truncate",children:item.title})]}),(0,jsx_runtime.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:item.detail})]}),(0,jsx_runtime.jsx)("div",{className:"text-[11px] font-semibold text-gray-500 shrink-0",children:item.timeLabel})]})]},item.id))]})}function AlertTimeline({items}){const tooltip=(0,hover_tooltip.f)(),[activeId,setActiveId]=(0,react.useState)("");return(0,jsx_runtime.jsxs)("div",{className:"relative space-y-2",children:[(0,jsx_runtime.jsx)(hover_tooltip.s,{state:tooltip.state,className:"w-[340px] text-sm font-semibold p-4"}),items.map(item=>(0,jsx_runtime.jsxs)("div",{className:"group relative rounded-xl border border-transparent px-2 py-2 transition-all duration-300 ease-in-out hover:border-gray-200 hover:bg-gray-50/80 hover:shadow-sm focus-within:border-gray-200 focus-within:bg-gray-50/80 focus-within:shadow-sm",onMouseEnter:e=>{setActiveId(item.id),tooltip.show(e.clientX,e.clientY,(0,jsx_runtime.jsxs)("div",{className:"space-y-1.5",children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-black text-gray-900",children:item.title}),(0,jsx_runtime.jsx)("div",{className:"text-xs text-gray-700",children:item.detail}),(0,jsx_runtime.jsxs)("div",{className:"text-[11px] font-semibold text-gray-600",children:["Date: ",item.timeLabel]}),(0,jsx_runtime.jsxs)("div",{className:"text-[11px] font-semibold text-gray-600",children:["Severity:"," ",(0,jsx_runtime.jsx)("span",{className:"error"===item.severity?"text-red-700 font-bold":"warn"===item.severity?"text-yellow-700 font-bold":"text-gray-700 font-bold",children:item.severity.toUpperCase()})]})]}))},onMouseMove:e=>{tooltip.show(e.clientX,e.clientY,(0,jsx_runtime.jsxs)("div",{className:"space-y-1.5",children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-black text-gray-900",children:item.title}),(0,jsx_runtime.jsx)("div",{className:"text-xs text-gray-700",children:item.detail}),(0,jsx_runtime.jsxs)("div",{className:"text-[11px] font-semibold text-gray-600",children:["Date: ",item.timeLabel]}),(0,jsx_runtime.jsxs)("div",{className:"text-[11px] font-semibold text-gray-600",children:["Severity:"," ",(0,jsx_runtime.jsx)("span",{className:"error"===item.severity?"text-red-700 font-bold":"warn"===item.severity?"text-yellow-700 font-bold":"text-gray-700 font-bold",children:item.severity.toUpperCase()})]})]}))},onMouseLeave:()=>{setActiveId(""),tooltip.hide()},onPointerDown:e=>{"touch"===e.pointerType&&(setActiveId(item.id),tooltip.show(e.clientX,e.clientY,(0,jsx_runtime.jsxs)("div",{className:"space-y-1.5",children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-black text-gray-900",children:item.title}),(0,jsx_runtime.jsx)("div",{className:"text-xs text-gray-700",children:item.detail}),(0,jsx_runtime.jsxs)("div",{className:"text-[11px] font-semibold text-gray-600",children:["Date: ",item.timeLabel]}),(0,jsx_runtime.jsxs)("div",{className:"text-[11px] font-semibold text-gray-600",children:["Severity:"," ",(0,jsx_runtime.jsx)("span",{className:"error"===item.severity?"text-red-700 font-bold":"warn"===item.severity?"text-yellow-700 font-bold":"text-gray-700 font-bold",children:item.severity.toUpperCase()})]})]}),{pinned:!0,autoHideMs:4e3}))},tabIndex:0,role:"group","aria-label":`${item.title}: ${item.detail}`,onKeyDown:e=>{if("Enter"!==e.key&&" "!==e.key)return;const rect=e.currentTarget.getBoundingClientRect();tooltip.show(rect.left+rect.width/2,rect.top+rect.height/2,(0,jsx_runtime.jsxs)("div",{className:"space-y-1.5",children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-black text-gray-900",children:item.title}),(0,jsx_runtime.jsx)("div",{className:"text-xs text-gray-700",children:item.detail}),(0,jsx_runtime.jsxs)("div",{className:"text-[11px] font-semibold text-gray-600",children:["Date: ",item.timeLabel]}),(0,jsx_runtime.jsxs)("div",{className:"text-[11px] font-semibold text-gray-600",children:["Severity:"," ",(0,jsx_runtime.jsx)("span",{className:"error"===item.severity?"text-red-700 font-bold":"warn"===item.severity?"text-yellow-700 font-bold":"text-gray-700 font-bold",children:item.severity.toUpperCase()})]})]}),{pinned:!0,autoHideMs:5e3})},onFocus:e=>{const rect=e.currentTarget.getBoundingClientRect();setActiveId(item.id),tooltip.show(rect.left+rect.width/2,rect.top+rect.height/2,(0,jsx_runtime.jsxs)("div",{className:"space-y-1.5",children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-black text-gray-900",children:item.title}),(0,jsx_runtime.jsx)("div",{className:"text-xs text-gray-700",children:item.detail}),(0,jsx_runtime.jsxs)("div",{className:"text-[11px] font-semibold text-gray-600",children:["Date: ",item.timeLabel]}),(0,jsx_runtime.jsxs)("div",{className:"text-[11px] font-semibold text-gray-600",children:["Severity:"," ",(0,jsx_runtime.jsx)("span",{className:"error"===item.severity?"text-red-700 font-bold":"warn"===item.severity?"text-yellow-700 font-bold":"text-gray-700 font-bold",children:item.severity.toUpperCase()})]})]}))},onBlur:()=>{setActiveId(""),tooltip.hide()},children:[(0,jsx_runtime.jsx)("div",{className:"absolute left-0 top-2 bottom-2 w-[2px] origin-left bg-gray-200 transition-transform duration-300 ease-in-out group-hover:scale-x-[1.2]"}),(0,jsx_runtime.jsxs)("div",{className:"flex items-start gap-3",children:[(0,jsx_runtime.jsx)("div",{className:"error"===item.severity?"w-2.5 h-2.5 mt-1 rounded-full bg-red-500 transition-transform duration-300 ease-in-out "+(activeId===item.id?"scale-110 shadow-sm":""):"warn"===item.severity?"w-2.5 h-2.5 mt-1 rounded-full bg-yellow-500 transition-transform duration-300 ease-in-out "+(activeId===item.id?"scale-110 shadow-sm":""):"w-2.5 h-2.5 mt-1 rounded-full bg-gray-400 transition-transform duration-300 ease-in-out "+(activeId===item.id?"scale-110 shadow-sm":"")}),(0,jsx_runtime.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,jsx_runtime.jsx)("p",{className:"text-sm font-bold text-gray-900 truncate",children:item.title}),(0,jsx_runtime.jsx)("span",{className:"text-[11px] font-semibold text-gray-500 shrink-0",children:item.timeLabel})]}),(0,jsx_runtime.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:item.detail})]})]})]},item.id))]})}function formatHhMm(ms){return new Date(ms).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function formatMmSs(seconds){const s=Math.max(0,Math.round(seconds)),mm=Math.floor(s/60),ss=s%60;return`${String(mm).padStart(2,"0")}:${String(ss).padStart(2,"0")}`}function buildSegmentedPath(points,smoothing=.16){const segments=[];let current=[];for(const p of points)p.valid?current.push({x:p.x,y:p.y}):(current.length>0&&segments.push(current),current=[]);return current.length>0&&segments.push(current),segments.map(seg=>toPath(seg,smoothing)).filter(Boolean)}function LiveCallsTimeSeriesChart({buckets,height=320,markers=[],anomalies=[],maintenanceWindows=[],peakBands=[],noteMode=!1,onAddNoteAtMs,onActiveBucketChange}){const tooltip=(0,hover_tooltip.f)(),svgRef=(0,react.useRef)(null),[activeIdx,setActiveIdx]=(0,react.useState)(null),[zoom,setZoom]=(0,react.useState)(1),[pan,setPan]=(0,react.useState)(1),panDragRef=(0,react.useRef)(null),pinchRef=(0,react.useRef)(null),chart=(0,react.useMemo)(()=>{const plotH=height-26-56;return{w:980,h:height,left:70,right:24,top:26,bottom:56,plotW:886,plotH,baseY:26+plotH}},[height]),visible=(0,react.useMemo)(()=>{const n=buckets.length;if(0===n)return{start:0,end:0,items:[]};const clampedZoom=dashboard_charts_clamp(zoom,1,2),visibleCount=dashboard_charts_clamp(Math.round(n/clampedZoom),2,n),maxStart=Math.max(0,n-visibleCount),start=dashboard_charts_clamp(Math.round(pan*maxStart),0,maxStart),end=Math.min(n-1,start+visibleCount-1),slice=buckets.slice(start,end+1),step=Math.max(1,Math.ceil(slice.length/720));return{start,end,items:1===step?slice:slice.filter((_,i)=>i%step===0||i===slice.length-1)}},[buckets,pan,zoom]),scale=(0,react.useMemo)(()=>{const values=visible.items.map(b=>"number"==typeof b.total?Math.max(0,b.total):0),maxVal=Math.max(1,...values),magnitude=Math.pow(10,Math.floor(Math.log10(maxVal))),stepBase=[1,2,2.5,5,10].find(s=>maxVal/magnitude<=s)??10,niceMax=Math.ceil(maxVal/(stepBase*magnitude))*stepBase*magnitude,ticks=[];for(let i=0;i<5;i++)ticks.push(Math.round(i*niceMax/4));return{niceMax,ticks,xFor:i=>visible.items.length<=1?chart.left+chart.plotW/2:chart.left+i*chart.plotW/(visible.items.length-1),yFor:v=>chart.top+chart.plotH-dashboard_charts_clamp(v,0,niceMax)/niceMax*chart.plotH}},[chart.left,chart.plotH,chart.plotW,chart.top,visible.items]),linePoints=(0,react.useMemo)(()=>visible.items.map((b,i)=>{const x=scale.xFor(i),valid="number"==typeof b.total&&Number.isFinite(b.total);return{x,y:scale.yFor(valid?b.total??0:0),valid}}),[scale,visible.items]),forecastPoints=(0,react.useMemo)(()=>visible.items.map((b,i)=>{const x=scale.xFor(i),valid="number"==typeof b.forecastTotal&&Number.isFinite(b.forecastTotal);return{x,y:scale.yFor(valid?b.forecastTotal??0:0),valid}}),[scale,visible.items]),lineSegments=(0,react.useMemo)(()=>buildSegmentedPath(linePoints,.16),[linePoints]),forecastSegments=(0,react.useMemo)(()=>buildSegmentedPath(forecastPoints,.16),[forecastPoints]),areaSegments=(0,react.useMemo)(()=>lineSegments.map(d=>{if(!d)return"";let first=null,last=null;for(const p of linePoints)p.valid&&(first||(first=p),last=p);return first&&last?`${d} L ${last.x} ${chart.baseY} L ${first.x} ${chart.baseY} Z`:""}).filter(Boolean),[chart.baseY,linePoints,lineSegments]),xTicks=(0,react.useMemo)(()=>{const n=visible.items.length;if(0===n)return[];const indices=Array.from(new Set([0,Math.floor((n-1)/3),Math.floor(2*(n-1)/3),n-1])),fallbackMs=visible.items[0]?.startMs??0;return indices.map(i=>({i,x:scale.xFor(i),label:formatHhMm(visible.items[i]?.startMs??fallbackMs)}))},[scale,visible.items]),markerInView=(0,react.useMemo)(()=>{if(0===visible.items.length)return{startMs:0,endMs:0,inView:[]};const startMs=visible.items[0]?.startMs??0,endMs=visible.items[visible.items.length-1]?.endMs??0;return{startMs,endMs,inView:markers.filter(m=>m.ms>=startMs&&m.ms<=endMs)}},[markers,visible.items]),windowsInView=(0,react.useMemo)(()=>{const startMs=markerInView.startMs,endMs=markerInView.endMs;return{maintenance:maintenanceWindows.filter(w=>w.endMs>=startMs&&w.startMs<=endMs),peaks:peakBands.filter(w=>w.endMs>=startMs&&w.startMs<=endMs)}},[maintenanceWindows,markerInView.endMs,markerInView.startMs,peakBands]),anomaliesInView=(0,react.useMemo)(()=>{const startMs=markerInView.startMs,endMs=markerInView.endMs;return anomalies.filter(a=>a.ms>=startMs&&a.ms<=endMs)},[anomalies,markerInView.endMs,markerInView.startMs]),xForMs=ms=>{if(markerInView.endMs<=markerInView.startMs)return chart.left;const t=dashboard_charts_clamp((ms-markerInView.startMs)/(markerInView.endMs-markerInView.startMs),0,1);return chart.left+t*chart.plotW},handlePointerMove=(clientX,clientY)=>{const svg=svgRef.current;if(!svg||0===visible.items.length)return;const t=(dashboard_charts_clamp(clientX-svg.getBoundingClientRect().left,chart.left,chart.left+chart.plotW)-chart.left)/Math.max(1,chart.plotW),idx=dashboard_charts_clamp(Math.round(t*Math.max(0,visible.items.length-1)),0,Math.max(0,visible.items.length-1));setActiveIdx(idx),onActiveBucketChange?.(visible.items[idx]??null),((idx,clientX,clientY)=>{const b=visible.items[idx];if(!b)return;const total="number"==typeof b.total?b.total:null,answered="number"==typeof b.answered?b.answered:null,failed="number"==typeof b.failed?b.failed:null,avgDur="number"==typeof b.avgDurationSec?b.avgDurationSec:null,answeredPct=total&&null!==answered?answered/Math.max(1,total)*100:null,failedPct=total&&null!==failed?failed/Math.max(1,total)*100:null,content=(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsxs)("div",{className:"text-sm font-black text-gray-900",children:[formatHhMm(b.startMs),"–",formatHhMm(b.endMs)]}),null===total?(0,jsx_runtime.jsx)("div",{className:"text-xs font-semibold text-gray-600",children:"Data gap"}):(0,jsx_runtime.jsxs)("div",{className:"space-y-1.5",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between gap-8 text-sm",children:[(0,jsx_runtime.jsx)("span",{className:"text-gray-700 font-semibold",children:"Total call volume"}),(0,jsx_runtime.jsx)("span",{className:"tabular-nums font-black text-gray-900",children:total.toLocaleString()})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between gap-8 text-sm",children:[(0,jsx_runtime.jsx)("span",{className:"text-gray-700 font-semibold",children:"Answered"}),(0,jsx_runtime.jsx)("span",{className:"tabular-nums font-black text-gray-900",children:null===answeredPct?"—":`${answeredPct.toFixed(1)}%`})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between gap-8 text-sm",children:[(0,jsx_runtime.jsx)("span",{className:"text-gray-700 font-semibold",children:"Failed"}),(0,jsx_runtime.jsx)("span",{className:"tabular-nums font-black text-gray-900",children:null===failedPct?"—":`${failedPct.toFixed(1)}%`})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between gap-8 text-sm",children:[(0,jsx_runtime.jsx)("span",{className:"text-gray-700 font-semibold",children:"Average duration"}),(0,jsx_runtime.jsx)("span",{className:"tabular-nums font-black text-gray-900",children:null===avgDur?"—":formatMmSs(avgDur)})]})]})]});tooltip.show(clientX,clientY,content)})(idx,clientX,clientY)};return(0,jsx_runtime.jsxs)("div",{className:"relative",children:[(0,jsx_runtime.jsx)(hover_tooltip.s,{state:tooltip.state}),(0,jsx_runtime.jsxs)("svg",{ref:svgRef,viewBox:`0 0 ${chart.w} ${chart.h}`,preserveAspectRatio:"xMidYMid meet",className:"w-full select-none text-foreground",style:{height,touchAction:"none"},role:"img","aria-label":"Live calls time-series chart",onMouseMove:e=>handlePointerMove(e.clientX,e.clientY),onMouseLeave:()=>{setActiveIdx(null),onActiveBucketChange?.(null),tooltip.hide()},onWheel:e=>{if(0===visible.items.length)return;const svg=svgRef.current;if(!svg)return;const rect=svg.getBoundingClientRect(),t=dashboard_charts_clamp((e.clientX-rect.left-chart.left)/Math.max(1,chart.plotW),0,1),nextZoom=dashboard_charts_clamp(zoom+(e.deltaY>0?-.12:.12),1,2),n=buckets.length,prevCount=dashboard_charts_clamp(Math.round(n/zoom),2,n),nextCount=dashboard_charts_clamp(Math.round(n/nextZoom),2,n),anchor=dashboard_charts_clamp(Math.round(pan*Math.max(0,n-prevCount)),0,Math.max(0,n-prevCount))+t*(prevCount-1),nextStart=dashboard_charts_clamp(Math.round(anchor-t*(nextCount-1)),0,Math.max(0,n-nextCount)),maxStart=Math.max(0,n-nextCount);setZoom(nextZoom),setPan(0===maxStart?0:nextStart/maxStart)},onDoubleClick:()=>(setZoom(1),setPan(1),setActiveIdx(null),void tooltip.hide()),onPointerDown:e=>{if(noteMode){const svg=svgRef.current;if(!svg||0===visible.items.length)return;const rect=svg.getBoundingClientRect(),t=(dashboard_charts_clamp(e.clientX-rect.left,chart.left,chart.left+chart.plotW)-chart.left)/Math.max(1,chart.plotW),idx=dashboard_charts_clamp(Math.round(t*Math.max(0,visible.items.length-1)),0,Math.max(0,visible.items.length-1)),b=visible.items[idx];return void(b&&onAddNoteAtMs?.(b.startMs))}if("mouse"!==e.pointerType&&"pen"!==e.pointerType||(panDragRef.current={active:!0,startX:e.clientX,startPan:pan}),"touch"===e.pointerType){const next={...pinchRef.current??{active:!1,a:null,b:null,startZoom:zoom,startDist:0}};next.a?next.b||next.a.id===e.pointerId||(next.b={id:e.pointerId,x:e.clientX,y:e.clientY}):next.a={id:e.pointerId,x:e.clientX,y:e.clientY},next.a&&next.b&&(next.active=!0,next.startZoom=zoom,next.startDist=Math.hypot(next.a.x-next.b.x,next.a.y-next.b.y)),pinchRef.current=next}},onPointerMove:e=>{const panDrag=panDragRef.current;if(panDrag?.active){const dx=e.clientX-panDrag.startX,n=buckets.length,visibleCount=dashboard_charts_clamp(Math.round(n/zoom),2,Math.max(2,n));if(Math.max(0,n-visibleCount)<=0)return;const delta=-dx/Math.max(1,chart.plotW),nextPan=dashboard_charts_clamp(panDrag.startPan+delta,0,1);return void setPan(nextPan)}const pr=pinchRef.current;if(!pr?.active)return;const next={...pr};if(next.a?.id===e.pointerId&&(next.a={...next.a,x:e.clientX,y:e.clientY}),next.b?.id===e.pointerId&&(next.b={...next.b,x:e.clientX,y:e.clientY}),!next.a||!next.b)return;const dist=Math.hypot(next.a.x-next.b.x,next.a.y-next.b.y),ratio=next.startDist>0?dist/next.startDist:1;setZoom(dashboard_charts_clamp(next.startZoom*ratio,1,2)),pinchRef.current=next},onPointerUp:e=>{const panDrag=panDragRef.current;panDrag?.active&&(panDragRef.current=null);const pr=pinchRef.current;pr?.a?.id===e.pointerId?pinchRef.current={...pr,a:null,active:!1}:pr?.b?.id===e.pointerId&&(pinchRef.current={...pr,b:null,active:!1})},children:[(0,jsx_runtime.jsxs)("defs",{children:[(0,jsx_runtime.jsxs)("linearGradient",{id:"liveLineGradient",x1:"0",y1:"0",x2:"1",y2:"0",children:[(0,jsx_runtime.jsx)("stop",{offset:"0%",stopColor:"#3498db"}),(0,jsx_runtime.jsx)("stop",{offset:"100%",stopColor:"#1abc9c"})]}),(0,jsx_runtime.jsxs)("linearGradient",{id:"liveAreaGradient",x1:"0",y1:"0",x2:"1",y2:"0",children:[(0,jsx_runtime.jsx)("stop",{offset:"0%",stopColor:"#3498db",stopOpacity:.1}),(0,jsx_runtime.jsx)("stop",{offset:"100%",stopColor:"#1abc9c",stopOpacity:.1})]})]}),(0,jsx_runtime.jsx)("rect",{x:chart.left,y:chart.top,width:chart.plotW,height:chart.plotH,fill:"rgba(0,0,0,0.02)",rx:14}),windowsInView.peaks.map((w,i)=>{const x1=xForMs(w.startMs),x2=xForMs(w.endMs);return(0,jsx_runtime.jsx)("rect",{x:x1,y:chart.top,width:Math.max(0,x2-x1),height:chart.plotH,fill:"rgba(234,179,8,0.18)"},`peak-${i}`)}),windowsInView.maintenance.map((w,i)=>{const x1=xForMs(w.startMs),x2=xForMs(w.endMs);return(0,jsx_runtime.jsx)("rect",{x:x1,y:chart.top,width:Math.max(0,x2-x1),height:chart.plotH,fill:"rgba(107,114,128,0.18)"},`mw-${i}`)}),xTicks.map(t=>(0,jsx_runtime.jsx)("line",{x1:t.x,x2:t.x,y1:chart.top,y2:chart.baseY,stroke:"currentColor",strokeOpacity:.3,strokeWidth:.5,strokeDasharray:"4 5"},`xg-${t.i}`)),scale.ticks.map(t=>{const y=scale.yFor(t);return(0,jsx_runtime.jsx)("line",{x1:chart.left,x2:chart.left+chart.plotW,y1:y,y2:y,stroke:"currentColor",strokeOpacity:.5,strokeWidth:1},`yg-${t}`)}),areaSegments.map((d,i)=>(0,jsx_runtime.jsx)("path",{d,fill:"url(#liveAreaGradient)"},`area-${i}`)),lineSegments.map((d,i)=>(0,jsx_runtime.jsx)("path",{d,fill:"none",stroke:"url(#liveLineGradient)",strokeWidth:2.75,strokeLinejoin:"round",strokeLinecap:"round"},`line-${i}`)),forecastSegments.map((d,i)=>(0,jsx_runtime.jsx)("path",{d,fill:"none",stroke:"currentColor",strokeOpacity:.5,strokeWidth:2,strokeDasharray:"6 6",strokeLinejoin:"round",strokeLinecap:"round"},`forecast-${i}`)),markerInView.inView.map((m,i)=>{const x=xForMs(m.ms),color="campaign-start"===m.kind?"rgba(52,152,219,0.7)":"campaign-end"===m.kind?"rgba(26,188,156,0.7)":"note"===m.kind?"rgba(147,51,234,0.75)":"rgba(107,114,128,0.75)";return(0,jsx_runtime.jsxs)("g",{children:[(0,jsx_runtime.jsx)("line",{x1:x,x2:x,y1:chart.top,y2:chart.baseY,stroke:color,strokeWidth:1}),(0,jsx_runtime.jsx)("text",{x:x+6,y:chart.top+14,style:{fontWeight:800,fontSize:11,fill:color},children:m.label})]},`${m.kind}-${m.ms}-${i}`)}),anomaliesInView.map((a,i)=>{const x=xForMs(a.ms),idx=visible.items.findIndex(b=>a.ms>=b.startMs&&a.ms<=b.endMs),b=idx>=0?visible.items[idx]:null,y=b&&"number"==typeof b.total?scale.yFor(b.total):chart.top+.5*chart.plotH,fill="spike"===a.kind?"rgba(239,68,68,0.95)":"rgba(249,115,22,0.95)",points="spike"===a.kind?`${x},${y-7} ${x-7},${y+7} ${x+7},${y+7}`:`${x},${y+7} ${x-7},${y-7} ${x+7},${y-7}`;return(0,jsx_runtime.jsx)("polygon",{points,fill},`anom-${i}`)}),null!==activeIdx?(()=>{const p=linePoints[activeIdx];return p?.valid?(0,jsx_runtime.jsx)("circle",{cx:p.x,cy:p.y,r:2,fill:"#ffffff",stroke:"url(#liveLineGradient)",strokeWidth:2}):null})():null,scale.ticks.map(t=>(0,jsx_runtime.jsx)("text",{x:chart.left-10,y:scale.yFor(t)+4,textAnchor:"end",style:{fontWeight:700,fontSize:12,fill:"currentColor",opacity:.75},children:t.toLocaleString()},`yl-${t}`)),xTicks.map(t=>(0,jsx_runtime.jsx)("text",{x:t.x,y:chart.baseY+26,textAnchor:"middle",style:{fontWeight:700,fontSize:12,fill:"currentColor",opacity:.75},children:t.label},`xl-${t.i}`)),(0,jsx_runtime.jsx)("text",{x:chart.left+chart.plotW/2,y:chart.h-12,textAnchor:"middle",style:{fontWeight:700,fontSize:12,fill:"currentColor",opacity:.85},children:"Time"}),(0,jsx_runtime.jsx)("text",{x:14,y:chart.top+chart.plotH/2,transform:`rotate(-90 14 ${chart.top+chart.plotH/2})`,textAnchor:"middle",style:{fontWeight:700,fontSize:12,fill:"currentColor",opacity:.85},children:"Number of Calls"})]})]})}TimeSeriesLineChart.__docgenInfo={description:"",methods:[],displayName:"TimeSeriesLineChart",props:{points:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  label: string;\n  value: number;\n}",signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"number",required:!0}}]}}],raw:"TimeSeriesPoint[]"},description:""},height:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"160",computed:!1}},stroke:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"#111827"',computed:!1}},fill:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"rgba(17, 24, 39, 0.10)"',computed:!1}}}},RealTimeBarChart.__docgenInfo={description:"",methods:[],displayName:"RealTimeBarChart",props:{points:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  label: string;\n  a: number;\n  b: number;\n}",signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"a",value:{name:"number",required:!0}},{key:"b",value:{name:"number",required:!0}}]}}],raw:"DualSeriesPoint[]"},description:""},maxValue:{required:!0,tsType:{name:"number"},description:""},height:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"160",computed:!1}},aColor:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"from-emerald-600 to-emerald-400"',computed:!1}},bColor:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"from-red-500 to-red-400"',computed:!1}}}},RealTimeCallLineChart.__docgenInfo={description:"",methods:[],displayName:"RealTimeCallLineChart",props:{points:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  label: string;\n  a: number;\n  b: number;\n}",signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"a",value:{name:"number",required:!0}},{key:"b",value:{name:"number",required:!0}}]}}],raw:"DualSeriesPoint[]"},description:""},height:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"300",computed:!1}}}},DonutChart.__docgenInfo={description:"",methods:[],displayName:"DonutChart",props:{value:{required:!0,tsType:{name:"number"},description:""},total:{required:!0,tsType:{name:"number"},description:""},size:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"132",computed:!1}},strokeWidth:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"14",computed:!1}},valueColor:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"#10B981"',computed:!1}},failedColor:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"#EF4444"',computed:!1}},trackColor:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"rgba(17, 24, 39, 0.10)"',computed:!1}}}},Heatmap.__docgenInfo={description:"",methods:[],displayName:"Heatmap",props:{rows:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},cols:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},cellValues:{required:!0,tsType:{name:"Array",elements:[{name:"Array",elements:[{name:"number"}],raw:"number[]"}],raw:"number[][]"},description:""},maxValue:{required:!0,tsType:{name:"number"},description:""}}},StackedAreaChart.__docgenInfo={description:"",methods:[],displayName:"StackedAreaChart",props:{points:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  label: string;\n  a: number;\n  b: number;\n}",signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"a",value:{name:"number",required:!0}},{key:"b",value:{name:"number",required:!0}}]}}],raw:"DualSeriesPoint[]"},description:""},height:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"160",computed:!1}},aColor:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"rgba(16, 185, 129, 0.22)"',computed:!1}},bColor:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"rgba(239, 68, 68, 0.18)"',computed:!1}},aStroke:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"rgba(16, 185, 129, 0.95)"',computed:!1}},bStroke:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"rgba(239, 68, 68, 0.85)"',computed:!1}}}},ActivityFeed.__docgenInfo={description:"",methods:[],displayName:"ActivityFeed",props:{items:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:'{\n  id: string;\n  title: string;\n  detail: string;\n  timeLabel: string;\n  tone?: "neutral" | "good" | "warn" | "bad";\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"title",value:{name:"string",required:!0}},{key:"detail",value:{name:"string",required:!0}},{key:"timeLabel",value:{name:"string",required:!0}},{key:"tone",value:{name:"union",raw:'"neutral" | "good" | "warn" | "bad"',elements:[{name:"literal",value:'"neutral"'},{name:"literal",value:'"good"'},{name:"literal",value:'"warn"'},{name:"literal",value:'"bad"'}],required:!1}}]}}],raw:"FeedItem[]"},description:""}}},AlertTimeline.__docgenInfo={description:"",methods:[],displayName:"AlertTimeline",props:{items:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:'{\n  id: string;\n  title: string;\n  detail: string;\n  timeLabel: string;\n  severity: "info" | "warn" | "error";\n}',signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"title",value:{name:"string",required:!0}},{key:"detail",value:{name:"string",required:!0}},{key:"timeLabel",value:{name:"string",required:!0}},{key:"severity",value:{name:"union",raw:'"info" | "warn" | "error"',elements:[{name:"literal",value:'"info"'},{name:"literal",value:'"warn"'},{name:"literal",value:'"error"'}],required:!0}}]}}],raw:"TimelineItem[]"},description:""}}},LiveCallsTimeSeriesChart.__docgenInfo={description:"",methods:[],displayName:"LiveCallsTimeSeriesChart",props:{buckets:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  startMs: number;\n  endMs: number;\n  total: number | null;\n  answered: number | null;\n  failed: number | null;\n  avgDurationSec: number | null;\n  forecastTotal?: number | null;\n}",signature:{properties:[{key:"startMs",value:{name:"number",required:!0}},{key:"endMs",value:{name:"number",required:!0}},{key:"total",value:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}],required:!0}},{key:"answered",value:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}],required:!0}},{key:"failed",value:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}],required:!0}},{key:"avgDurationSec",value:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}],required:!0}},{key:"forecastTotal",value:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}],required:!1}}]}}],raw:"LiveTimeBucket[]"},description:""},height:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"320",computed:!1}},markers:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:'{\n  ms: number;\n  label: string;\n  kind: "campaign-start" | "campaign-end" | "note" | "event";\n}',signature:{properties:[{key:"ms",value:{name:"number",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"kind",value:{name:"union",raw:'"campaign-start" | "campaign-end" | "note" | "event"',elements:[{name:"literal",value:'"campaign-start"'},{name:"literal",value:'"campaign-end"'},{name:"literal",value:'"note"'},{name:"literal",value:'"event"'}],required:!0}}]}}],raw:"LiveChartMarker[]"},description:"",defaultValue:{value:"[]",computed:!1}},anomalies:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:'{\n  ms: number;\n  kind: "spike" | "drop";\n}',signature:{properties:[{key:"ms",value:{name:"number",required:!0}},{key:"kind",value:{name:"union",raw:'"spike" | "drop"',elements:[{name:"literal",value:'"spike"'},{name:"literal",value:'"drop"'}],required:!0}}]}}],raw:"LiveAnomaly[]"},description:"",defaultValue:{value:"[]",computed:!1}},maintenanceWindows:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  startMs: number;\n  endMs: number;\n  label?: string;\n}",signature:{properties:[{key:"startMs",value:{name:"number",required:!0}},{key:"endMs",value:{name:"number",required:!0}},{key:"label",value:{name:"string",required:!1}}]}}],raw:"LiveWindow[]"},description:"",defaultValue:{value:"[]",computed:!1}},peakBands:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  startMs: number;\n  endMs: number;\n  label?: string;\n}",signature:{properties:[{key:"startMs",value:{name:"number",required:!0}},{key:"endMs",value:{name:"number",required:!0}},{key:"label",value:{name:"string",required:!1}}]}}],raw:"LiveWindow[]"},description:"",defaultValue:{value:"[]",computed:!1}},noteMode:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onAddNoteAtMs:{required:!1,tsType:{name:"signature",type:"function",raw:"(ms: number) => void",signature:{arguments:[{type:{name:"number"},name:"ms"}],return:{name:"void"}}},description:""},onActiveBucketChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(bucket: LiveTimeBucket | null) => void",signature:{arguments:[{type:{name:"union",raw:"LiveTimeBucket | null",elements:[{name:"signature",type:"object",raw:"{\n  startMs: number;\n  endMs: number;\n  total: number | null;\n  answered: number | null;\n  failed: number | null;\n  avgDurationSec: number | null;\n  forecastTotal?: number | null;\n}",signature:{properties:[{key:"startMs",value:{name:"number",required:!0}},{key:"endMs",value:{name:"number",required:!0}},{key:"total",value:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}],required:!0}},{key:"answered",value:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}],required:!0}},{key:"failed",value:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}],required:!0}},{key:"avgDurationSec",value:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}],required:!0}},{key:"forecastTotal",value:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}],required:!1}}]}},{name:"null"}]},name:"bucket"}],return:{name:"void"}}},description:""}}};const dashboard_charts_stories={title:"UI/DashboardCharts",component:TimeSeriesLineChart},timeSeries=[{label:"Mon",value:120},{label:"Tue",value:180},{label:"Wed",value:240},{label:"Thu",value:210},{label:"Fri",value:320},{label:"Sat",value:280},{label:"Sun",value:360}],dualSeries=[{label:"09:00",a:220,b:64},{label:"10:00",a:240,b:58},{label:"11:00",a:260,b:72}],feed=[{id:"f1",title:"Campaign started",detail:"Holiday Sales Outreach is now running.",timeLabel:"Now",tone:"good"},{id:"f2",title:"Queue spike",detail:"Inbound queue peaked at 42 calls.",timeLabel:"2m ago",tone:"warn"},{id:"f3",title:"Connector synced",detail:"Google Calendar sync completed.",timeLabel:"11m ago",tone:"neutral"}],timeline=[{id:"t1",title:"High failure rate",detail:"18 failed calls out of 96 (18.8%).",timeLabel:"Jan 13",severity:"warn"},{id:"t2",title:"Outage detected",detail:"Provider returned 503 for 3 minutes.",timeLabel:"Jan 12",severity:"error"},{id:"t3",title:"Recovered",detail:"Delivery stabilized after retry backoff.",timeLabel:"Jan 12",severity:"info"}];function nowMs(){return Date.now()}const buckets=Array.from({length:120}).map((_,i)=>{const startMs=nowMs()-6e4*(120-i),total=Math.max(0,Math.round(120+40*Math.sin(i/6)+18*(Math.random()-.5))),failed=Math.max(0,Math.round(total*(.06+.04*Math.random())));return{startMs,endMs:startMs+6e4,total,answered:Math.max(0,total-failed),failed,avgDurationSec:95+18*Math.sin(i/10),forecastTotal:total+Math.round(20*(Math.random()-.5))}}),markers=[{ms:buckets[20]?.startMs??nowMs(),label:"Campaign start",kind:"campaign-start"},{ms:buckets[70]?.startMs??nowMs(),label:"Note",kind:"note"}],anomalies=[{ms:buckets[42]?.startMs??nowMs(),kind:"spike"},{ms:buckets[95]?.startMs??nowMs(),kind:"drop"}],maintenanceWindows=[{startMs:buckets[50]?.startMs??nowMs(),endMs:buckets[60]?.endMs??nowMs(),label:"Maintenance"}],peakBands=[{startMs:buckets[30]?.startMs??nowMs(),endMs:buckets[40]?.endMs??nowMs(),label:"Peak"}],TimeSeries={render:()=>(0,jsx_runtime.jsx)("div",{className:"p-6 bg-gray-50",children:(0,jsx_runtime.jsx)(TimeSeriesLineChart,{points:timeSeries})})},RealTimeBars={render:()=>(0,jsx_runtime.jsx)("div",{className:"p-6 bg-gray-50",children:(0,jsx_runtime.jsx)(RealTimeBarChart,{points:dualSeries,maxValue:360})})},RealTimeCallLine={render:()=>(0,jsx_runtime.jsx)("div",{className:"p-6 bg-gray-50",children:(0,jsx_runtime.jsx)(RealTimeCallLineChart,{points:dualSeries,maxValue:360})})},Donut={render:()=>(0,jsx_runtime.jsx)("div",{className:"p-6 bg-gray-50 max-w-sm",children:(0,jsx_runtime.jsx)(DonutChart,{value:820,total:1e3})})},HeatmapDemo={render:()=>(0,jsx_runtime.jsx)("div",{className:"p-6 bg-gray-50",children:(0,jsx_runtime.jsx)(Heatmap,{rows:7,cols:24,cellSize:14,values:Array.from({length:168}).map((_,i)=>Math.max(0,.55*Math.sin(i/6)+.35*(Math.random()-.5)))})})},StackedArea={render:()=>(0,jsx_runtime.jsx)("div",{className:"p-6 bg-gray-50",children:(0,jsx_runtime.jsx)(StackedAreaChart,{points:timeSeries.map((p,i)=>({label:p.label,a:Math.round(.86*p.value),b:Math.round(.14*p.value+i%2*6)}))})})},Activity={render:()=>(0,jsx_runtime.jsx)("div",{className:"p-6 bg-gray-50 max-w-xl",children:(0,jsx_runtime.jsx)(ActivityFeed,{items:feed})})},Alerts={render:()=>(0,jsx_runtime.jsx)("div",{className:"p-6 bg-gray-50 max-w-xl",children:(0,jsx_runtime.jsx)(AlertTimeline,{items:timeline})})},LiveCalls={render:()=>(0,jsx_runtime.jsx)("div",{className:"p-6 bg-gray-50",children:(0,jsx_runtime.jsx)(LiveCallsTimeSeriesChart,{buckets,markers,anomalies,maintenanceWindows,peakBands})})},__namedExportsOrder=["TimeSeries","RealTimeBars","RealTimeCallLine","Donut","HeatmapDemo","StackedArea","Activity","Alerts","LiveCalls"];TimeSeries.parameters={...TimeSeries.parameters,docs:{...TimeSeries.parameters?.docs,source:{originalSource:'{\n  render: () => <div className="p-6 bg-gray-50">\r\n            <TimeSeriesLineChart points={timeSeries} />\r\n        </div>\n}',...TimeSeries.parameters?.docs?.source}}},RealTimeBars.parameters={...RealTimeBars.parameters,docs:{...RealTimeBars.parameters?.docs,source:{originalSource:'{\n  render: () => <div className="p-6 bg-gray-50">\r\n            <RealTimeBarChart points={dualSeries} maxValue={360} />\r\n        </div>\n}',...RealTimeBars.parameters?.docs?.source}}},RealTimeCallLine.parameters={...RealTimeCallLine.parameters,docs:{...RealTimeCallLine.parameters?.docs,source:{originalSource:'{\n  render: () => <div className="p-6 bg-gray-50">\r\n            <RealTimeCallLineChart points={dualSeries} maxValue={360} />\r\n        </div>\n}',...RealTimeCallLine.parameters?.docs?.source}}},Donut.parameters={...Donut.parameters,docs:{...Donut.parameters?.docs,source:{originalSource:'{\n  render: () => <div className="p-6 bg-gray-50 max-w-sm">\r\n            <DonutChart value={820} total={1000} />\r\n        </div>\n}',...Donut.parameters?.docs?.source}}},HeatmapDemo.parameters={...HeatmapDemo.parameters,docs:{...HeatmapDemo.parameters?.docs,source:{originalSource:'{\n  render: () => <div className="p-6 bg-gray-50">\r\n            <Heatmap rows={7} cols={24} cellSize={14} values={Array.from({\n      length: 7 * 24\n    }).map((_, i) => Math.max(0, Math.sin(i / 6) * 0.55 + (Math.random() - 0.5) * 0.35))} />\r\n        </div>\n}',...HeatmapDemo.parameters?.docs?.source}}},StackedArea.parameters={...StackedArea.parameters,docs:{...StackedArea.parameters?.docs,source:{originalSource:'{\n  render: () => <div className="p-6 bg-gray-50">\r\n            <StackedAreaChart points={timeSeries.map((p, i) => ({\n      label: p.label,\n      a: Math.round(p.value * 0.86),\n      b: Math.round(p.value * 0.14 + i % 2 * 6)\n    }))} />\r\n        </div>\n}',...StackedArea.parameters?.docs?.source}}},Activity.parameters={...Activity.parameters,docs:{...Activity.parameters?.docs,source:{originalSource:'{\n  render: () => <div className="p-6 bg-gray-50 max-w-xl">\r\n            <ActivityFeed items={feed} />\r\n        </div>\n}',...Activity.parameters?.docs?.source}}},Alerts.parameters={...Alerts.parameters,docs:{...Alerts.parameters?.docs,source:{originalSource:'{\n  render: () => <div className="p-6 bg-gray-50 max-w-xl">\r\n            <AlertTimeline items={timeline} />\r\n        </div>\n}',...Alerts.parameters?.docs?.source}}},LiveCalls.parameters={...LiveCalls.parameters,docs:{...LiveCalls.parameters?.docs,source:{originalSource:'{\n  render: () => <div className="p-6 bg-gray-50">\r\n            <LiveCallsTimeSeriesChart buckets={buckets} markers={markers} anomalies={anomalies} maintenanceWindows={maintenanceWindows} peakBands={peakBands} />\r\n        </div>\n}',...LiveCalls.parameters?.docs?.source}}}},"./src/components/ui/hover-tooltip.tsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{f:()=>useHoverTooltip,s:()=>HoverTooltip});var react_dom__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react-dom/index.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_lib_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/lib/utils.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");function clamp(value,min,max){return Math.min(max,Math.max(min,value))}function useHoverTooltip(){const[state,setState]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({open:!1}),stateRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(state),hideTimerRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);(0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)(()=>{stateRef.current=state},[state]);const api=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>({show:(x,y,content,options)=>{hideTimerRef.current&&(window.clearTimeout(hideTimerRef.current),hideTimerRef.current=null);const current=stateRef.current,pinned=Boolean(options?.pinned);(!current.open||current.pinned!==pinned||Math.abs(current.x-x)+Math.abs(current.y-y)>2||current.content!==content)&&setState({open:!0,x,y,content,pinned}),options?.autoHideMs&&options.autoHideMs>0&&(hideTimerRef.current=window.setTimeout(()=>{setState({open:!1}),hideTimerRef.current=null},options.autoHideMs))},hide:()=>{hideTimerRef.current&&(window.clearTimeout(hideTimerRef.current),hideTimerRef.current=null),setState({open:!1})}}),[]);return{state,...api}}function HoverTooltip({state,className,margin=10}){const ref=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),[pos,setPos]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({left:0,top:0});return(0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)(()=>{if(!state.open)return;const el=ref.current;if(!el)return;const m=Math.max(10,margin),rect=el.getBoundingClientRect(),preferredLeft=state.x,preferredTop=state.y-12,left=clamp(preferredLeft-rect.width/2,m,window.innerWidth-m-rect.width),top=clamp(preferredTop-rect.height,m,window.innerHeight-m-rect.height),id=window.requestAnimationFrame(()=>{setPos({left,top})});return()=>window.cancelAnimationFrame(id)},[margin,state]),"undefined"!=typeof document&&state.open?(0,react_dom__WEBPACK_IMPORTED_MODULE_0__.createPortal)((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("fixed z-[60] pointer-events-none select-none rounded-xl border border-gray-200/70 bg-white/95 backdrop-blur px-3 py-2 text-xs font-semibold text-gray-900 shadow-lg transition-opacity duration-300 ease-in-out",className),style:{left:pos.left,top:pos.top},role:"tooltip",children:state.content}),document.body):null}},"./src/lib/utils.ts"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{cn:()=>cn});var clsx__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),tailwind_merge__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/tailwind-merge/dist/bundle-mjs.mjs");function cn(...inputs){return(0,tailwind_merge__WEBPACK_IMPORTED_MODULE_1__.QP)((0,clsx__WEBPACK_IMPORTED_MODULE_0__.$)(inputs))}}}]);