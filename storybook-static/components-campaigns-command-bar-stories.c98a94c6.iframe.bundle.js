"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[577],{"./.storybook/mocks/next-navigation.ts"(__unused_webpack_module,__webpack_exports__,__webpack_require__){function useRouter(){return{push:_href=>{},replace:_href=>{},back:()=>{},forward:()=>{},refresh:()=>{},prefetch:async _href=>{}}}__webpack_require__.d(__webpack_exports__,{rd:()=>useRouter})},"./src/components/campaigns/command-bar.stories.tsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>command_bar_stories});var react=__webpack_require__("./node_modules/react/index.js"),modal=__webpack_require__("./src/components/ui/modal.tsx"),input=__webpack_require__("./src/components/ui/input.tsx"),ui_button=__webpack_require__("./src/components/ui/button.tsx"),campaign_performance=__webpack_require__("./src/lib/campaign-performance.ts"),next_navigation=__webpack_require__("./.storybook/mocks/next-navigation.ts"),utils=__webpack_require__("./src/lib/utils.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function matchScore(text,query){const t=text.toLowerCase(),q=query.toLowerCase();return 0===q.length?0:t===q?1e3:t.startsWith(q)?700:t.includes(q)?300:0}function CommandBar({campaigns,onPause,onResume}){const router=(0,next_navigation.rd)(),[open,setOpen]=(0,react.useState)(!1),[value,setValue]=(0,react.useState)(""),[activeIndex,setActiveIndex]=(0,react.useState)(0),inputRef=(0,react.useRef)(null),openBar=()=>{setOpen(!0),setActiveIndex(0)};(0,react.useEffect)(()=>{const onKeyDown=e=>{const isK="k"===e.key.toLowerCase();(e.metaKey||e.ctrlKey)&&isK&&(e.preventDefault(),openBar())};return window.addEventListener("keydown",onKeyDown),()=>window.removeEventListener("keydown",onKeyDown)},[]),(0,react.useEffect)(()=>{if(!open)return;const t=window.setTimeout(()=>inputRef.current?.focus(),0);return()=>window.clearTimeout(t)},[open]);const parsed=(0,react.useMemo)(()=>(0,campaign_performance.FR)(value),[value]),results=(0,react.useMemo)(()=>{const q=parsed.query.trim(),users=[{id:"usr-001",name:"Alex Operator",role:"Ops"},{id:"usr-002",name:"Morgan Analyst",role:"Analytics"},{id:"usr-003",name:"Jamie Admin",role:"Admin"}],tags=[{id:"tag-priority",name:"priority"},{id:"tag-sales",name:"sales"},{id:"tag-support",name:"support"},{id:"tag-survey",name:"survey"}],base=[{id:"nav-analytics",category:"Reports",title:"Analytics Dashboard",href:"/analytics"},{id:"nav-settings",category:"Settings",title:"Settings",href:"/ai-options"},{id:"nav-help",category:"Help Docs",title:"Getting Started",href:"/"}],campaignResults=campaigns.map(c=>({id:`camp-${c.id}`,category:"Campaigns",title:c.name,subtitle:c.id,href:`/campaigns/${c.id}`}));if(">"===parsed.prefix){return[...base,...campaignResults].map(r=>({r,score:matchScore(r.title,q)+(r.subtitle?.2*matchScore(r.subtitle,q):0)})).filter(x=>x.score>0||0===q.length).sort((a,b)=>b.score-a.score).slice(0,12).map(x=>x.r)}if("/"===parsed.prefix){return[{id:"action-export",category:"Reports",title:"Export campaigns",subtitle:"Opens export modal",action:()=>router.push("/campaigns#export")},{id:"action-new-campaign",category:"Campaigns",title:"Create new campaign",subtitle:"Navigate to create flow",action:()=>router.push("/campaigns/new")},{id:"action-pause-active",category:"Campaigns",title:"Pause all active campaigns",subtitle:"Prototype action",action:async()=>{for(const c of campaigns)"running"===(c.status||"").toLowerCase()&&await onPause(c.id)}},{id:"action-resume-paused",category:"Campaigns",title:"Resume all paused campaigns",subtitle:"Prototype action",action:async()=>{for(const c of campaigns)"paused"===(c.status||"").toLowerCase()&&await onResume(c.id)}}].map(r=>({r,score:matchScore(r.title,q)+(r.subtitle?.2*matchScore(r.subtitle,q):0)})).filter(x=>x.score>0||0===q.length).sort((a,b)=>b.score-a.score).slice(0,12).map(x=>x.r)}if("@"===parsed.prefix){return users.map(u=>({r:{id:`user-${u.id}`,category:"Settings",title:u.name,subtitle:u.role,action:()=>router.push(`/ai-options?user=${encodeURIComponent(u.id)}`)},score:matchScore(u.name,q)+.2*matchScore(u.id,q)})).filter(x=>x.score>0||0===q.length).sort((a,b)=>b.score-a.score).slice(0,12).map(x=>x.r)}if("#"===parsed.prefix){return tags.map(t=>({r:{id:`tag-${t.id}`,category:"Reports",title:`#${t.name}`,subtitle:"Filter view (prototype)",action:()=>router.push(`/campaigns?tag=${encodeURIComponent(t.name)}`)},score:matchScore(t.name,q)+.2*matchScore(t.id,q)})).filter(x=>x.score>0||0===q.length).sort((a,b)=>b.score-a.score).slice(0,12).map(x=>x.r)}return[...campaignResults,...base].map(r=>({r,score:matchScore(r.title,q)+(r.subtitle?.2*matchScore(r.subtitle,q):0)})).filter(x=>x.score>0||0===q.length).sort((a,b)=>b.score-a.score).slice(0,12).map(x=>x.r)},[campaigns,onPause,onResume,parsed.prefix,parsed.query,router]),runResult=async r=>{setOpen(!1),setValue(""),r.action?await r.action():r.href&&router.push(r.href)};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:"content-card flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"text-sm font-semibold text-white",children:"Search & Command Bar"}),(0,jsx_runtime.jsx)("div",{className:"mt-1 text-sm text-gray-400",children:"Press Ctrl + K to open."})]}),(0,jsx_runtime.jsx)("div",{className:"flex items-center gap-2",children:(0,jsx_runtime.jsx)(ui_button.$,{type:"button",variant:"outline",onClick:openBar,children:"Ctrl + K"})})]}),(0,jsx_runtime.jsx)(modal.a,{open,onOpenChange:next=>{next?openBar():(setOpen(!1),setValue(""),setActiveIndex(0))},title:"Command Bar",description:"Search campaigns, navigate, and run actions.",size:"lg",children:(0,jsx_runtime.jsxs)("div",{className:"space-y-3",children:[(0,jsx_runtime.jsx)(input.p,{ref:inputRef,value,onChange:e=>{setValue(e.target.value),setActiveIndex(0)},onKeyDown:e=>{if("ArrowDown"===e.key)e.preventDefault(),setActiveIndex(i=>Math.min(results.length-1,i+1));else if("ArrowUp"===e.key)e.preventDefault(),setActiveIndex(i=>Math.max(0,i-1));else if("Enter"===e.key){e.preventDefault();const r=results[activeIndex];r&&runResult(r)}else"Escape"===e.key&&(e.preventDefault(),setOpen(!1))},placeholder:'Try "Holiday", "/pause", or "> analytics"â€¦',className:"border-white/10 bg-white/5 text-white placeholder:text-gray-400 focus-visible:ring-white/30"}),(0,jsx_runtime.jsx)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-2",children:0===results.length?(0,jsx_runtime.jsx)("div",{className:"px-2 py-6 text-center text-sm text-gray-300",children:"No results"}):(0,jsx_runtime.jsx)("div",{className:"space-y-1",children:results.map((r,idx)=>(0,jsx_runtime.jsxs)("button",{type:"button",className:(0,utils.cn)("flex w-full items-start justify-between gap-3 rounded-lg px-3 py-2 text-left",idx===activeIndex?"bg-white/10":"hover:bg-white/5"),onMouseEnter:()=>setActiveIndex(idx),onClick:()=>{runResult(r)},children:[(0,jsx_runtime.jsxs)("div",{className:"min-w-0",children:[(0,jsx_runtime.jsx)("div",{className:"truncate text-sm font-semibold text-white",children:r.title}),r.subtitle?(0,jsx_runtime.jsx)("div",{className:"truncate text-xs font-semibold text-gray-400",children:r.subtitle}):null]}),(0,jsx_runtime.jsx)("div",{className:"shrink-0 text-xs font-semibold text-gray-300",children:r.category})]},r.id))})}),(0,jsx_runtime.jsxs)("div",{className:"text-xs font-semibold text-gray-400",children:["Prefixes: ",(0,jsx_runtime.jsx)("span",{className:"text-gray-200",children:"/"})," actions, ",(0,jsx_runtime.jsx)("span",{className:"text-gray-200",children:">"})," navigation, ",(0,jsx_runtime.jsx)("span",{className:"text-gray-200",children:"@"})," users, ",(0,jsx_runtime.jsx)("span",{className:"text-gray-200",children:"#"})," tags"]})]})})]})}CommandBar.__docgenInfo={description:"",methods:[],displayName:"CommandBar",props:{campaigns:{required:!0,tsType:{name:"Array",elements:[{name:"Campaign"}],raw:"Campaign[]"},description:""},onPause:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => Promise<void>",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}}},description:""},onResume:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => Promise<void>",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}}},description:""}}};const command_bar_stories={title:"Campaigns/CommandBar",component:CommandBar,args:{campaigns:[{id:"camp-001",name:"Holiday Sales Outreach",description:"End of year promotional campaign for existing customers",status:"running",system_prompt:"You are a friendly sales representative...",voice_id:"voice-001",max_concurrent_calls:10,total_leads:500,calls_completed:342,calls_failed:45,created_at:"2025-12-15T10:00:00Z",started_at:"2025-12-16T09:00:00Z"},{id:"camp-002",name:"Customer Satisfaction Survey",description:"Post-purchase feedback collection",status:"paused",system_prompt:"You are conducting a brief customer satisfaction survey...",voice_id:"voice-002",max_concurrent_calls:5,total_leads:200,calls_completed:87,calls_failed:12,created_at:"2025-12-20T14:00:00Z",started_at:"2025-12-21T10:00:00Z"}],onPause:async()=>{},onResume:async()=>{}}},Default={},__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{}",...Default.parameters?.docs?.source}}}},"./src/components/ui/input.tsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{p:()=>Input});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_lib_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/lib/utils.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Input=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(({className,type,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("input",{type,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_1__.cn)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-gray-900 placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-400 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",className),ref,...props}));Input.displayName="Input",Input.__docgenInfo={description:"",methods:[],displayName:"Input"}}}]);